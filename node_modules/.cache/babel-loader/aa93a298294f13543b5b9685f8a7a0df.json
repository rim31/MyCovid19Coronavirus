{"ast":null,"code":"import _regeneratorRuntime from\"/Users/rims/Documents/Projects/covid19/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/rims/Documents/Projects/covid19/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/rims/Documents/Projects/covid19/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";// eslint-disable-next-line\nimport*as React from'react';import{createContainer}from\"unstated-next\";import moment from'moment';import _ from'lodash';import{country_list}from'./Map/countries';// source : \"https://api.covid19api.com/\"\n// source : \"https://covidtracking.com/api/us/daily\"\nexport var useStore=function useStore(){var _React$useState=React.useState(\"\"),_React$useState2=_slicedToArray(_React$useState,2),country=_React$useState2[0],setCountry=_React$useState2[1];var _React$useState3=React.useState(\"\"),_React$useState4=_slicedToArray(_React$useState3,2),code=_React$useState4[0],setCode=_React$useState4[1];var _React$useState5=React.useState([]),_React$useState6=_slicedToArray(_React$useState5,2),covidApi=_React$useState6[0],setCovidApi=_React$useState6[1];var _React$useState7=React.useState([]),_React$useState8=_slicedToArray(_React$useState7,2),countriesML=_React$useState8[0],setCountriesML=_React$useState8[1];var _React$useState9=React.useState([]),_React$useState10=_slicedToArray(_React$useState9,2),data=_React$useState10[0],setData=_React$useState10[1];// data for graph\nvar _React$useState11=React.useState([]),_React$useState12=_slicedToArray(_React$useState11,2),dataDiff=_React$useState12[0],setDataDiff=_React$useState12[1];// data diff for graph\nvar _React$useState13=React.useState([]),_React$useState14=_slicedToArray(_React$useState13,2),total=_React$useState14[0],setTotal=_React$useState14[1];var _React$useState15=React.useState([]),_React$useState16=_slicedToArray(_React$useState15,2),labels=_React$useState16[0],setLabels=_React$useState16[1];var _React$useState17=React.useState([]),_React$useState18=_slicedToArray(_React$useState17,2),markers=_React$useState18[0],setMarkers=_React$useState18[1];var headers=new Headers({\"Accept\":\"application/json\",\"Content-Type\":\"application/json\",\"User-Agent\":\"Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:78.0) Gecko/20100101 Firefox/78.0\"});var debug=true;function globalDataGraph(data){var resultCases=[];var resultDates=[];for(var i in data){resultDates.push(i);resultCases.push(data[i]);}// console.log(resultCases, resultDates);\nreturn{resultCases:resultCases,resultDates:resultDates};}function countriesListData(data){var resultCases=[];var resultCountries=[];var result=[];for(var i in data){resultCountries.push(data[i].Country);resultCases.push(data[i].TotalConfirmed);result.push({country:data[i].Country,TotalConfirmed:data[i].TotalConfirmed,sortable:true});}// console.log(resultCases, resultCountries);\nreturn{result:result,resultCases:resultCases,resultCountries:resultCountries};}function countryDataGraph(data,country,caseType,dateTo){var resultCases=[];var resultDates=[];if(data.length>0){data.forEach(function(item){// console.log(\"item : \", caseType, item[caseType], item);\nif(country==='FR'){console.log(\"country\",country);if(!item.Province){resultCases.push(item.Cases);resultDates.push(moment(item.Date).format('YYYY/MM/DD'));}// } else if (country === 'us' || debug === true) {\n}else if(country==='US'&&debug===true){if(moment(item.last_update).isAfter(dateTo)){resultCases.push(caseType===\"confirmed\"?item.cases:item[caseType]);resultDates.push(moment(item.last_update).format('YYYY/MM/DD'));}}else{if(moment(item.Date).isAfter(dateTo)){resultCases.push(item.Cases);resultDates.push(moment(item.Date).format('YYYY/MM/DD'));}}});var resultCasesDiff=_.map(resultCases,function(e,i){return resultCases[i+1]-e<0?0:resultCases[i+1]-e;});console.log(\"resultCases\",resultCases);resultCasesDiff.pop();resultCases.pop();resultDates.pop();dataDiff===[]?console.log(dataDiff):console.log('');setData(resultCasesDiff);// inversion between resultCasesDiff and resultCases for display graph of variations and not total\nsetDataDiff(resultCases);setLabels(resultDates);return{resultCases:resultCases,resultDates:resultDates,resultCasesDiff:resultCasesDiff};}else{setData([]);setLabels([]);setDataDiff([]);}}// function getCovidApi() :  get data by country\n// differents source cause pb with USA, \n// you cans get data according Country Code, date from  and case : confirmed, deaths, recovered\n// have to use function countryDataGraph() to clean data and have an array to fit with D3js charts react-map-smples\nfunction getCovidApi(country,caseType,dateTo){if(country===\"\"){countryDataGraph([],\"\",\"\",\"\");}else{try{if(debug===false){return fetch(\"https://covid19-api.org/api/timeline/\".concat(country),{method:'GET',redirect:'follow',headers:headers}).then(function(response){return response.json();}).then(function(res){countryDataGraph(res.reverse(),country,caseType,dateTo);// cleaning data for ChartJS\n}).catch(function(err){return alert(err);});}else{return fetch(\"https://api.covid19api.com/country/\".concat(country,\"/status/\").concat(caseType,\"/live?from=\").concat(dateTo,\"&to=\").concat(moment().format('YYYY-MM-DDT00:00:00')),{method:'GET',redirect:'follow',headers:headers}).then(function(response){return response.json();}).then(function(res){console.log(\"res Fetch\",res);countryDataGraph(res,country,caseType,dateTo);// cleaning data for ChartJS\n}).catch(function(err){return alert(err);});}}catch(err){console.log(err);return;}}};// to set unstated.total data : {Global, Countries,..} all total data of today\nvar getTotal=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"https://api.covid19api.com/summary\").then(function(res){return res.json();}).then(function(resp){return setTotal(resp);}).catch(function(err){throw err;});case 2:case\"end\":return _context.stop();}}},_callee);}));return function getTotal(){return _ref.apply(this,arguments);};}();var getCovidCountry=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(country,caseType,dateTo){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.t0=setCovidApi;_context2.next=3;return getCovidApi(country,caseType,dateTo);case 3:_context2.t1=_context2.sent;(0,_context2.t0)(_context2.t1);case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function getCovidCountry(_x,_x2,_x3){return _ref2.apply(this,arguments);};}();var updateTotalCovid=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.t0=setTotal;_context3.next=3;return getTotal();case 3:_context3.t1=_context3.sent;(0,_context3.t0)(_context3.t1);case 5:case\"end\":return _context3.stop();}}},_callee3);}));return function updateTotalCovid(){return _ref3.apply(this,arguments);};}();// =================================================\n// function matching data for the map : react map simples\n// source (`https://api.covid19api.com/all`, {\nfunction getMarkers(arr1,arr2){return _.union(_.map(arr1,function(obj1){var same=_.find(arr2,function(obj2){return obj1[\"CountryCode\"]===obj2[\"code\"];});return same?_.extend(obj1,same):obj1;}),_.reject(arr2,function(obj2){return _.find(arr1,function(obj1){return obj2[\"code\"]===obj1[\"CountryCode\"];});}));}//order \nfunction dynamicSort(property){var sortOrder=1;if(property[0]===\"-\"){sortOrder=-1;property=property.substr(1);}return function(b,a){/* next line works with strings and numbers, \n       * and you may want to customize it to your needs\n       */var result=a[property]<b[property]?-1:a[property]>b[property]?1:0;return result*sortOrder;};}function getCovidMapMarkers(){fetch(\"https://api.covid19api.com/summary\",{method:\"GET\"}).then(function(response){return response.json();}).then(function(res){// console.log(\"***********************\", res.Countries);\nvar resp=getMarkers(res.Countries,country_list);setMarkers(resp.sort(dynamicSort(\"TotalConfirmed\")));// console.log(resp);\nreturn resp;}).catch(function(err){return alert(err);});}function getCountriesML(){try{return fetch(\"\\\"https://covid19-api.org/api/status\\\"\",{method:\"GET\"}).then(function(response){return response.text();});}catch(err){console.log(err);return;}};var updateCountriesML=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.t0=setCountriesML;_context4.next=3;return getCountriesML();case 3:_context4.t1=_context4.sent;(0,_context4.t0)(_context4.t1);case 5:case\"end\":return _context4.stop();}}},_callee4);}));return function updateCountriesML(){return _ref4.apply(this,arguments);};}();return{covidApi:covidApi,country_list:country_list,data:data,labels:labels,total:total,country:country,code:code,markers:markers,countriesML:countriesML,setCountry:setCountry,setCode:setCode,getTotal:getTotal,getCovidCountry:getCovidCountry,updateTotalCovid:updateTotalCovid,countryDataGraph:countryDataGraph,globalDataGraph:globalDataGraph,countriesListData:countriesListData,getCovidMapMarkers:getCovidMapMarkers,updateCountriesML:updateCountriesML};};export var StoreContainer=createContainer(useStore);// let country_list = { 'AF' : 'Afghanistan', 'AX' : 'Aland Islands', 'AL' : 'Albania', 'DZ' : 'Algeria', 'AS' : 'American Samoa', 'AD' : 'Andorra', 'AO' : 'Angola', 'AI' : 'Anguilla', 'AQ' : 'Antarctica', 'AG' : 'Antigua And Barbuda', 'AR' : 'Argentina', 'AM' : 'Armenia', 'AW' : 'Aruba', 'AU' : 'Australia', 'AT' : 'Austria', 'AZ' : 'Azerbaijan', 'BS' : 'Bahamas', 'BH' : 'Bahrain', 'BD' : 'Bangladesh', 'BB' : 'Barbados', 'BY' : 'Belarus', 'BE' : 'Belgium', 'BZ' : 'Belize', 'BJ' : 'Benin', 'BM' : 'Bermuda', 'BT' : 'Bhutan', 'BO' : 'Bolivia', 'BA' : 'Bosnia And Herzegovina', 'BW' : 'Botswana', 'BV' : 'Bouvet Island', 'BR' : 'Brazil', 'IO' : 'British Indian Ocean Territory', 'BN' : 'Brunei Darussalam', 'BG' : 'Bulgaria', 'BF' : 'Burkina Faso', 'BI' : 'Burundi', 'KH' : 'Cambodia', 'CM' : 'Cameroon', 'CA' : 'Canada', 'CV' : 'Cape Verde', 'KY' : 'Cayman Islands', 'CF' : 'Central African Republic', 'TD' : 'Chad', 'CL' : 'Chile', 'CN' : 'China', 'CX' : 'Christmas Island', 'CC' : 'Cocos (Keeling) Islands', 'CO' : 'Colombia', 'KM' : 'Comoros', 'CG' : 'Congo', 'CD' : 'Congo, Democratic Republic', 'CK' : 'Cook Islands', 'CR' : 'Costa Rica', 'CI' : 'Cote D\\'Ivoire', 'HR' : 'Croatia', 'CU' : 'Cuba', 'CY' : 'Cyprus', 'CZ' : 'Czech Republic', 'DK' : 'Denmark', 'DJ' : 'Djibouti', 'DM' : 'Dominica', 'DO' : 'Dominican Republic', 'EC' : 'Ecuador', 'EG' : 'Egypt', 'SV' : 'El Salvador', 'GQ' : 'Equatorial Guinea', 'ER' : 'Eritrea', 'EE' : 'Estonia', 'ET' : 'Ethiopia', 'FK' : 'Falkland Islands (Malvinas)', 'FO' : 'Faroe Islands', 'FJ' : 'Fiji', 'FI' : 'Finland', 'FR' : 'France', 'GF' : 'French Guiana', 'PF' : 'French Polynesia', 'TF' : 'French Southern Territories', 'GA' : 'Gabon', 'GM' : 'Gambia', 'GE' : 'Georgia', 'DE' : 'Germany', 'GH' : 'Ghana', 'GI' : 'Gibraltar', 'GR' : 'Greece', 'GL' : 'Greenland', 'GD' : 'Grenada', 'GP' : 'Guadeloupe', 'GU' : 'Guam', 'GT' : 'Guatemala', 'GG' : 'Guernsey', 'GN' : 'Guinea', 'GW' : 'Guinea-Bissau', 'GY' : 'Guyana', 'HT' : 'Haiti', 'HM' : 'Heard Island & Mcdonald Islands', 'VA' : 'Holy See (Vatican City State)', 'HN' : 'Honduras', 'HK' : 'Hong Kong', 'HU' : 'Hungary', 'IS' : 'Iceland', 'IN' : 'India', 'ID' : 'Indonesia', 'IR' : 'Iran, Islamic Republic Of', 'IQ' : 'Iraq', 'IE' : 'Ireland', 'IM' : 'Isle Of Man', 'IL' : 'Israel', 'IT' : 'Italy', 'JM' : 'Jamaica', 'JP' : 'Japan', 'JE' : 'Jersey', 'JO' : 'Jordan', 'KZ' : 'Kazakhstan', 'KE' : 'Kenya', 'KI' : 'Kiribati', 'KR' : 'Korea', 'KW' : 'Kuwait', 'KG' : 'Kyrgyzstan', 'LA' : 'Lao People\\'s Democratic Republic', 'LV' : 'Latvia', 'LB' : 'Lebanon', 'LS' : 'Lesotho', 'LR' : 'Liberia', 'LY' : 'Libyan Arab Jamahiriya', 'LI' : 'Liechtenstein', 'LT' : 'Lithuania', 'LU' : 'Luxembourg', 'MO' : 'Macao', 'MK' : 'Macedonia', 'MG' : 'Madagascar', 'MW' : 'Malawi', 'MY' : 'Malaysia', 'MV' : 'Maldives', 'ML' : 'Mali', 'MT' : 'Malta', 'MH' : 'Marshall Islands', 'MQ' : 'Martinique', 'MR' : 'Mauritania', 'MU' : 'Mauritius', 'YT' : 'Mayotte', 'MX' : 'Mexico', 'FM' : 'Micronesia, Federated States Of', 'MD' : 'Moldova', 'MC' : 'Monaco', 'MN' : 'Mongolia', 'ME' : 'Montenegro', 'MS' : 'Montserrat', 'MA' : 'Morocco', 'MZ' : 'Mozambique', 'MM' : 'Myanmar', 'NA' : 'Namibia', 'NR' : 'Nauru', 'NP' : 'Nepal', 'NL' : 'Netherlands', 'AN' : 'Netherlands Antilles', 'NC' : 'New Caledonia', 'NZ' : 'New Zealand', 'NI' : 'Nicaragua', 'NE' : 'Niger', 'NG' : 'Nigeria', 'NU' : 'Niue', 'NF' : 'Norfolk Island', 'MP' : 'Northern Mariana Islands', 'NO' : 'Norway', 'OM' : 'Oman', 'PK' : 'Pakistan', 'PW' : 'Palau', 'PS' : 'Palestinian Territory, Occupied', 'PA' : 'Panama', 'PG' : 'Papua New Guinea', 'PY' : 'Paraguay', 'PE' : 'Peru', 'PH' : 'Philippines', 'PN' : 'Pitcairn', 'PL' : 'Poland', 'PT' : 'Portugal', 'PR' : 'Puerto Rico', 'QA' : 'Qatar', 'RE' : 'Reunion', 'RO' : 'Romania', 'RU' : 'Russian Federation', 'RW' : 'Rwanda', 'BL' : 'Saint Barthelemy', 'SH' : 'Saint Helena', 'KN' : 'Saint Kitts And Nevis', 'LC' : 'Saint Lucia', 'MF' : 'Saint Martin', 'PM' : 'Saint Pierre And Miquelon', 'VC' : 'Saint Vincent And Grenadines', 'WS' : 'Samoa', 'SM' : 'San Marino', 'ST' : 'Sao Tome And Principe', 'SA' : 'Saudi Arabia', 'SN' : 'Senegal', 'RS' : 'Serbia', 'SC' : 'Seychelles', 'SL' : 'Sierra Leone', 'SG' : 'Singapore', 'SK' : 'Slovakia', 'SI' : 'Slovenia', 'SB' : 'Solomon Islands', 'SO' : 'Somalia', 'ZA' : 'South Africa', 'GS' : 'South Georgia And Sandwich Isl.', 'ES' : 'Spain', 'LK' : 'Sri Lanka', 'SD' : 'Sudan', 'SR' : 'Suriname', 'SJ' : 'Svalbard And Jan Mayen', 'SZ' : 'Swaziland', 'SE' : 'Sweden', 'CH' : 'Switzerland', 'SY' : 'Syrian Arab Republic', 'TW' : 'Taiwan', 'TJ' : 'Tajikistan', 'TZ' : 'Tanzania', 'TH' : 'Thailand', 'TL' : 'Timor-Leste', 'TG' : 'Togo', 'TK' : 'Tokelau', 'TO' : 'Tonga', 'TT' : 'Trinidad And Tobago', 'TN' : 'Tunisia', 'TR' : 'Turkey', 'TM' : 'Turkmenistan', 'TC' : 'Turks And Caicos Islands', 'TV' : 'Tuvalu', 'UG' : 'Uganda', 'UA' : 'Ukraine', 'AE' : 'United Arab Emirates', 'GB' : 'United Kingdom', 'US' : 'United States', 'UM' : 'United States Outlying Islands', 'UY' : 'Uruguay', 'UZ' : 'Uzbekistan', 'VU' : 'Vanuatu', 'VE' : 'Venezuela', 'VN' : 'Viet Nam', 'VG' : 'Virgin Islands, British', 'VI' : 'Virgin Islands, U.S.', 'WF' : 'Wallis And Futuna', 'EH' : 'Western Sahara', 'YE' : 'Yemen', 'ZM' : 'Zambia', 'ZW' : 'Zimbabwe' };\n// let country_list = [\"Afghanistan\", \"Albania\", \"Algeria\", \"Andorra\", \"Angola\", \"Anguilla\", \"Antigua &amp; Barbuda\", \"Argentina\", \"Armenia\", \"Aruba\", \"Australia\", \"Austria\", \"Azerbaijan\", \"Bahamas\", \"Bahrain\", \"Bangladesh\", \"Barbados\", \"Belarus\", \"Belgium\", \"Belize\", \"Benin\", \"Bermuda\", \"Bhutan\", \"Bolivia\", \"Bosnia &amp; Herzegovina\", \"Botswana\", \"Brazil\", \"British Virgin Islands\", \"Brunei\", \"Bulgaria\", \"Burkina Faso\", \"Burundi\", \"Cambodia\", \"Cameroon\", \"Cape Verde\", \"Cayman Islands\", \"Chad\", \"Chile\", \"China\", \"Colombia\", \"Congo\", \"Cook Islands\", \"Costa Rica\", \"Cote D Ivoire\", \"Croatia\", \"Cruise Ship\", \"Cuba\", \"Cyprus\", \"Czech Republic\", \"Denmark\", \"Djibouti\", \"Dominica\", \"Dominican Republic\", \"Ecuador\", \"Egypt\", \"El Salvador\", \"Equatorial Guinea\", \"Estonia\", \"Ethiopia\", \"Falkland Islands\", \"Faroe Islands\", \"Fiji\", \"Finland\", \"France\", \"French Polynesia\", \"French West Indies\", \"Gabon\", \"Gambia\", \"Georgia\", \"Germany\", \"Ghana\", \"Gibraltar\", \"Greece\", \"Greenland\", \"Grenada\", \"Guam\", \"Guatemala\", \"Guernsey\", \"Guinea\", \"Guinea Bissau\", \"Guyana\", \"Haiti\", \"Honduras\", \"Hong Kong\", \"Hungary\", \"Iceland\", \"India\", \"Indonesia\", \"Iran\", \"Iraq\", \"Ireland\", \"Isle of Man\", \"Israel\", \"Italy\", \"Jamaica\", \"Japan\", \"Jersey\", \"Jordan\", \"Kazakhstan\", \"Kenya\", \"Kuwait\", \"Kyrgyz Republic\", \"Laos\", \"Latvia\", \"Lebanon\", \"Lesotho\", \"Liberia\", \"Libya\", \"Liechtenstein\", \"Lithuania\", \"Luxembourg\", \"Macau\", \"Macedonia\", \"Madagascar\", \"Malawi\", \"Malaysia\", \"Maldives\", \"Mali\", \"Malta\", \"Mauritania\", \"Mauritius\", \"Mexico\", \"Moldova\", \"Monaco\", \"Mongolia\", \"Montenegro\", \"Montserrat\", \"Morocco\", \"Mozambique\", \"Namibia\", \"Nepal\", \"Netherlands\", \"Netherlands Antilles\", \"New Caledonia\", \"New Zealand\", \"Nicaragua\", \"Niger\", \"Nigeria\", \"Norway\", \"Oman\", \"Pakistan\", \"Palestine\", \"Panama\", \"Papua New Guinea\", \"Paraguay\", \"Peru\", \"Philippines\", \"Poland\", \"Portugal\", \"Puerto Rico\", \"Qatar\", \"Reunion\", \"Romania\", \"Russia\", \"Rwanda\", \"Saint Pierre &amp; Miquelon\", \"Samoa\", \"San Marino\", \"Satellite\", \"Saudi Arabia\", \"Senegal\", \"Serbia\", \"Seychelles\", \"Sierra Leone\", \"Singapore\", \"Slovakia\", \"Slovenia\", \"South Africa\", \"South Korea\", \"Spain\", \"Sri Lanka\", \"St Kitts &amp; Nevis\", \"St Lucia\", \"St Vincent\", \"St. Lucia\", \"Sudan\", \"Suriname\", \"Swaziland\", \"Sweden\", \"Switzerland\", \"Syria\", \"Taiwan\", \"Tajikistan\", \"Tanzania\", \"Thailand\", \"Timor L'Este\", \"Togo\", \"Tonga\", \"Trinidad &amp; Tobago\", \"Tunisia\", \"Turkey\", \"Turkmenistan\", \"Turks &amp; Caicos\", \"Uganda\", \"Ukraine\", \"United Arab Emirates\", \"United Kingdom\", \"Uruguay\", \"Uzbekistan\", \"Venezuela\", \"Vietnam\", \"Virgin Islands (US)\", \"Yemen\", \"Zambia\", \"Zimbabwe\"];","map":{"version":3,"sources":["/Users/rims/Documents/Projects/covid19/src/components/Store.tsx"],"names":["React","createContainer","moment","_","country_list","useStore","useState","country","setCountry","code","setCode","covidApi","setCovidApi","countriesML","setCountriesML","data","setData","dataDiff","setDataDiff","total","setTotal","labels","setLabels","markers","setMarkers","headers","Headers","debug","globalDataGraph","resultCases","resultDates","i","push","countriesListData","resultCountries","result","Country","TotalConfirmed","sortable","countryDataGraph","caseType","dateTo","length","forEach","item","console","log","Province","Cases","Date","format","last_update","isAfter","cases","resultCasesDiff","map","e","pop","getCovidApi","fetch","method","redirect","then","response","json","res","reverse","catch","err","alert","getTotal","resp","getCovidCountry","updateTotalCovid","getMarkers","arr1","arr2","union","obj1","same","find","obj2","extend","reject","dynamicSort","property","sortOrder","substr","b","a","getCovidMapMarkers","Countries","sort","getCountriesML","text","updateCountriesML","StoreContainer"],"mappings":"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","sourcesContent":["// eslint-disable-next-line\nimport * as React from 'react';\nimport { createContainer } from \"unstated-next\";\nimport moment from 'moment';\nimport _ from 'lodash';\nimport { country_list } from './Map/countries';\n// source : \"https://api.covid19api.com/\"\n// source : \"https://covidtracking.com/api/us/daily\"\n\ninterface ICountryData {\n  Cases: Number,\n  City: String,\n  CityName: String,\n  Country: String,\n  CountryName: String,\n  Date: Date,\n  Lat: String,\n  Lon: String,\n  Province: String,\n  Status: String,\n}\n\ninterface IGlobalData {\n  NewConfirmed: Number,\n  NewDeaths: Number,\n  NewRecovered: Number,\n  TotalConfirmed: Number,\n  TotalDeaths: Number,\n  TotalRecovered: Number\n}\n\ninterface ICountry {\n  Country: string,\n  CountryName: string,\n  Slug: string,\n  NewConfirmed: number,\n  TotalConfirmed: number,\n  NewDeaths: number,\n  TotalDeaths: number,\n  NewRecovered: number,\n  TotalRecovered: number,\n  Date: Date\n}\n\ninterface IDataCovid {\n  country: string,\n  cases: number,\n  deaths: number,\n  recovered: number,\n  last_update: Date\n}\n\ninterface ICountries {\n  timezones: string[],\n  latlon?: string[],\n  lat?: number,\n  lon?: number,\n  name: string,\n  code: string,\n  capital: string\n}\n\nexport const useStore = () => {\n  const [country, setCountry] = React.useState<string>(\"\");\n  const [code, setCode] = React.useState<string>(\"\");\n  const [covidApi, setCovidApi] = React.useState<Object[] | null | void | undefined>([]);\n  const [countriesML, setCountriesML] = React.useState<Object[] | any>([]);\n  const [data, setData] = React.useState<Object[] | void | null | undefined>([]);// data for graph\n  const [dataDiff, setDataDiff] = React.useState<number[] | any[] | undefined>([]);// data diff for graph\n  const [total, setTotal] = React.useState<IGlobalData[] | void | null | undefined>([]);\n  const [labels, setLabels] = React.useState<Object[] | void | null | undefined>([]);\n  const [markers, setMarkers] = React.useState<any[] | undefined>([]);\n  const headers = new Headers({\n    \"Accept\": \"application/json\",\n    \"Content-Type\": \"application/json\",\n    \"User-Agent\": \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:78.0) Gecko/20100101 Firefox/78.0\"\n  });\n\n  const debug: boolean = true;\n\n\n\n  function globalDataGraph(data: any) {\n    let resultCases: any[] = []\n    let resultDates: any[] = []\n    for (let i in data) {\n      resultDates.push(i);\n      resultCases.push(data[i]);\n    }\n    // console.log(resultCases, resultDates);\n    return ({ resultCases, resultDates });\n  }\n\n  function countriesListData(data: ICountry[]) {\n    let resultCases: any[] = []\n    let resultCountries: any[] = []\n    let result: any[] = []\n    for (let i in data) {\n      resultCountries.push(data[i].Country);\n      resultCases.push(data[i].TotalConfirmed);\n      result.push({\n        country: data[i].Country, TotalConfirmed: data[i].TotalConfirmed,\n        sortable: true,\n      })\n    }\n    // console.log(resultCases, resultCountries);\n    return ({ result, resultCases, resultCountries });\n  }\n\n  function countryDataGraph(data: IDataCovid[] | ICountry[], country: string, caseType: string, dateTo: string) {\n    let resultCases: any[] = []\n    let resultDates: any[] = []\n    if (data.length > 0) {\n      data.forEach((item: any) => {\n        // console.log(\"item : \", caseType, item[caseType], item);\n        if (country === 'FR') {\n          console.log(`country`, country)\n          if (!item.Province) {\n            resultCases.push(item.Cases);\n            resultDates.push(moment(item.Date).format('YYYY/MM/DD'));\n          }\n          // } else if (country === 'us' || debug === true) {\n        } else if (country === 'US' && debug === true) {\n          if ((moment(item.last_update).isAfter(dateTo))) {\n            resultCases.push(caseType === \"confirmed\" ? item.cases : item[caseType]);\n            resultDates.push(moment(item.last_update).format('YYYY/MM/DD'));\n          }\n        } else {\n          if ((moment(item.Date).isAfter(dateTo))) {\n            resultCases.push(item.Cases);\n            resultDates.push(moment(item.Date).format('YYYY/MM/DD'));\n          }\n        }\n      })\n      let resultCasesDiff: any[] = _.map(resultCases, function (e: any, i: any) {\n        return (resultCases[i + 1] - e) < 0 ? 0 : (resultCases[i + 1] - e)\n      });\n      console.log(`resultCases`, resultCases)\n      resultCasesDiff.pop();\n      resultCases.pop();\n      resultDates.pop();\n      dataDiff === [] ? console.log(dataDiff) : console.log('');\n      setData(resultCasesDiff);// inversion between resultCasesDiff and resultCases for display graph of variations and not total\n      setDataDiff(resultCases);\n      setLabels(resultDates);\n      return ({ resultCases, resultDates, resultCasesDiff });\n    } else {\n      setData([]);\n      setLabels([]);\n      setDataDiff([]);\n\n    }\n  }\n\n  // function getCovidApi() :  get data by country\n  // differents source cause pb with USA, \n  // you cans get data according Country Code, date from  and case : confirmed, deaths, recovered\n  // have to use function countryDataGraph() to clean data and have an array to fit with D3js charts react-map-smples\n  function getCovidApi(country: string, caseType: string, dateTo: string) {\n    if (country === \"\") {\n      countryDataGraph([], \"\", \"\", \"\");\n    } else {\n      try {\n        if (debug === false) {\n          return fetch(`https://covid19-api.org/api/timeline/${country}`, {\n            method: 'GET',\n            redirect: 'follow',\n            headers: headers\n          })\n            .then((response: any) => response.json()).then((res) => {\n              countryDataGraph(res.reverse(), country, caseType, dateTo);// cleaning data for ChartJS\n            }).catch(err => alert(err));\n        } else {\n          return fetch(`https://api.covid19api.com/country/${country}/status/${caseType}/live?from=${dateTo}&to=${moment().format('YYYY-MM-DDT00:00:00')}`, {\n            method: 'GET',\n            redirect: 'follow',\n            headers: headers\n          })\n            .then((response: any) => response.json()).then((res) => {\n              console.log(`res Fetch`, res)\n              countryDataGraph(res, country, caseType, dateTo);// cleaning data for ChartJS\n            }).catch(err => alert(err));\n        }\n      } catch (err) {\n        console.log(err)\n        return;\n      }\n    }\n  };\n\n\n  // to set unstated.total data : {Global, Countries,..} all total data of today\n  const getTotal = async () => {\n    await fetch(`https://api.covid19api.com/summary`)\n      .then(res => res.json())\n      .then(resp => setTotal(resp))\n      .catch((err) => { throw (err) })\n  }\n\n  const getCovidCountry = async (country: string, caseType: string, dateTo: string) => {\n    setCovidApi(await getCovidApi(country, caseType, dateTo));\n    // console.log(`https://covid19-api.org/api/timeline/${country}`)\n    // console.log(`https://api.covid19api.com/country/${country}/status/${caseType}/live?from=${dateTo}&to=${moment().format('YYYY-MM-DDT00:00:00')}`)\n  }\n\n\n  const updateTotalCovid = async () => {\n    setTotal(await getTotal());\n  }\n\n  // =================================================\n\n  // function matching data for the map : react map simples\n  // source (`https://api.covid19api.com/all`, {\n  function getMarkers(arr1: any, arr2: any) {\n    return _.union(\n      _.map(arr1, function (obj1) {\n        var same = _.find(arr2, function (obj2) {\n          return obj1[\"CountryCode\"] === obj2[\"code\"];\n        });\n        return same ? _.extend(obj1, same) : obj1;\n      }),\n      _.reject(arr2, function (obj2) {\n        return _.find(arr1, function (obj1) {\n          return obj2[\"code\"] === obj1[\"CountryCode\"];\n        });\n      })\n    );\n  }\n\n  //order \n  function dynamicSort(property: any) {\n    var sortOrder = 1;\n    if (property[0] === \"-\") {\n      sortOrder = -1;\n      property = property.substr(1);\n    }\n    return function (b: any, a: any) {\n      /* next line works with strings and numbers, \n       * and you may want to customize it to your needs\n       */\n      var result = (a[property] < b[property]) ? -1 : (a[property] > b[property]) ? 1 : 0;\n      return result * sortOrder;\n    }\n  }\n  function getCovidMapMarkers() {\n    fetch(`https://api.covid19api.com/summary`, {\n      method: \"GET\",\n    }).then((response: any) => response.json()).then((res) => {\n      // console.log(\"***********************\", res.Countries);\n      let resp = getMarkers(res.Countries, country_list);\n      setMarkers(resp.sort(dynamicSort(\"TotalConfirmed\")));\n      // console.log(resp);\n      return (resp);\n    }).catch(err => alert(err));\n  }\n\n  function getCountriesML() {\n    try {\n      return fetch(`\"https://covid19-api.org/api/status\"`, {\n        method: \"GET\",\n      }).then((response: any) => response.text())\n    } catch (err) {\n      console.log(err)\n      return;\n    }\n  };\n\n  const updateCountriesML = async () => {\n    setCountriesML(await getCountriesML());\n  }\n\n  return {\n    covidApi,\n    country_list,\n    data,\n    labels,\n    total,\n    country,\n    code,\n    markers,\n    countriesML,\n    setCountry,\n    setCode,\n    getTotal,\n    getCovidCountry,\n    updateTotalCovid,\n    countryDataGraph,\n    globalDataGraph,\n    countriesListData,\n    getCovidMapMarkers,\n    updateCountriesML,\n  };\n}\nexport const StoreContainer = createContainer(useStore)\n\n// let country_list = { 'AF' : 'Afghanistan', 'AX' : 'Aland Islands', 'AL' : 'Albania', 'DZ' : 'Algeria', 'AS' : 'American Samoa', 'AD' : 'Andorra', 'AO' : 'Angola', 'AI' : 'Anguilla', 'AQ' : 'Antarctica', 'AG' : 'Antigua And Barbuda', 'AR' : 'Argentina', 'AM' : 'Armenia', 'AW' : 'Aruba', 'AU' : 'Australia', 'AT' : 'Austria', 'AZ' : 'Azerbaijan', 'BS' : 'Bahamas', 'BH' : 'Bahrain', 'BD' : 'Bangladesh', 'BB' : 'Barbados', 'BY' : 'Belarus', 'BE' : 'Belgium', 'BZ' : 'Belize', 'BJ' : 'Benin', 'BM' : 'Bermuda', 'BT' : 'Bhutan', 'BO' : 'Bolivia', 'BA' : 'Bosnia And Herzegovina', 'BW' : 'Botswana', 'BV' : 'Bouvet Island', 'BR' : 'Brazil', 'IO' : 'British Indian Ocean Territory', 'BN' : 'Brunei Darussalam', 'BG' : 'Bulgaria', 'BF' : 'Burkina Faso', 'BI' : 'Burundi', 'KH' : 'Cambodia', 'CM' : 'Cameroon', 'CA' : 'Canada', 'CV' : 'Cape Verde', 'KY' : 'Cayman Islands', 'CF' : 'Central African Republic', 'TD' : 'Chad', 'CL' : 'Chile', 'CN' : 'China', 'CX' : 'Christmas Island', 'CC' : 'Cocos (Keeling) Islands', 'CO' : 'Colombia', 'KM' : 'Comoros', 'CG' : 'Congo', 'CD' : 'Congo, Democratic Republic', 'CK' : 'Cook Islands', 'CR' : 'Costa Rica', 'CI' : 'Cote D\\'Ivoire', 'HR' : 'Croatia', 'CU' : 'Cuba', 'CY' : 'Cyprus', 'CZ' : 'Czech Republic', 'DK' : 'Denmark', 'DJ' : 'Djibouti', 'DM' : 'Dominica', 'DO' : 'Dominican Republic', 'EC' : 'Ecuador', 'EG' : 'Egypt', 'SV' : 'El Salvador', 'GQ' : 'Equatorial Guinea', 'ER' : 'Eritrea', 'EE' : 'Estonia', 'ET' : 'Ethiopia', 'FK' : 'Falkland Islands (Malvinas)', 'FO' : 'Faroe Islands', 'FJ' : 'Fiji', 'FI' : 'Finland', 'FR' : 'France', 'GF' : 'French Guiana', 'PF' : 'French Polynesia', 'TF' : 'French Southern Territories', 'GA' : 'Gabon', 'GM' : 'Gambia', 'GE' : 'Georgia', 'DE' : 'Germany', 'GH' : 'Ghana', 'GI' : 'Gibraltar', 'GR' : 'Greece', 'GL' : 'Greenland', 'GD' : 'Grenada', 'GP' : 'Guadeloupe', 'GU' : 'Guam', 'GT' : 'Guatemala', 'GG' : 'Guernsey', 'GN' : 'Guinea', 'GW' : 'Guinea-Bissau', 'GY' : 'Guyana', 'HT' : 'Haiti', 'HM' : 'Heard Island & Mcdonald Islands', 'VA' : 'Holy See (Vatican City State)', 'HN' : 'Honduras', 'HK' : 'Hong Kong', 'HU' : 'Hungary', 'IS' : 'Iceland', 'IN' : 'India', 'ID' : 'Indonesia', 'IR' : 'Iran, Islamic Republic Of', 'IQ' : 'Iraq', 'IE' : 'Ireland', 'IM' : 'Isle Of Man', 'IL' : 'Israel', 'IT' : 'Italy', 'JM' : 'Jamaica', 'JP' : 'Japan', 'JE' : 'Jersey', 'JO' : 'Jordan', 'KZ' : 'Kazakhstan', 'KE' : 'Kenya', 'KI' : 'Kiribati', 'KR' : 'Korea', 'KW' : 'Kuwait', 'KG' : 'Kyrgyzstan', 'LA' : 'Lao People\\'s Democratic Republic', 'LV' : 'Latvia', 'LB' : 'Lebanon', 'LS' : 'Lesotho', 'LR' : 'Liberia', 'LY' : 'Libyan Arab Jamahiriya', 'LI' : 'Liechtenstein', 'LT' : 'Lithuania', 'LU' : 'Luxembourg', 'MO' : 'Macao', 'MK' : 'Macedonia', 'MG' : 'Madagascar', 'MW' : 'Malawi', 'MY' : 'Malaysia', 'MV' : 'Maldives', 'ML' : 'Mali', 'MT' : 'Malta', 'MH' : 'Marshall Islands', 'MQ' : 'Martinique', 'MR' : 'Mauritania', 'MU' : 'Mauritius', 'YT' : 'Mayotte', 'MX' : 'Mexico', 'FM' : 'Micronesia, Federated States Of', 'MD' : 'Moldova', 'MC' : 'Monaco', 'MN' : 'Mongolia', 'ME' : 'Montenegro', 'MS' : 'Montserrat', 'MA' : 'Morocco', 'MZ' : 'Mozambique', 'MM' : 'Myanmar', 'NA' : 'Namibia', 'NR' : 'Nauru', 'NP' : 'Nepal', 'NL' : 'Netherlands', 'AN' : 'Netherlands Antilles', 'NC' : 'New Caledonia', 'NZ' : 'New Zealand', 'NI' : 'Nicaragua', 'NE' : 'Niger', 'NG' : 'Nigeria', 'NU' : 'Niue', 'NF' : 'Norfolk Island', 'MP' : 'Northern Mariana Islands', 'NO' : 'Norway', 'OM' : 'Oman', 'PK' : 'Pakistan', 'PW' : 'Palau', 'PS' : 'Palestinian Territory, Occupied', 'PA' : 'Panama', 'PG' : 'Papua New Guinea', 'PY' : 'Paraguay', 'PE' : 'Peru', 'PH' : 'Philippines', 'PN' : 'Pitcairn', 'PL' : 'Poland', 'PT' : 'Portugal', 'PR' : 'Puerto Rico', 'QA' : 'Qatar', 'RE' : 'Reunion', 'RO' : 'Romania', 'RU' : 'Russian Federation', 'RW' : 'Rwanda', 'BL' : 'Saint Barthelemy', 'SH' : 'Saint Helena', 'KN' : 'Saint Kitts And Nevis', 'LC' : 'Saint Lucia', 'MF' : 'Saint Martin', 'PM' : 'Saint Pierre And Miquelon', 'VC' : 'Saint Vincent And Grenadines', 'WS' : 'Samoa', 'SM' : 'San Marino', 'ST' : 'Sao Tome And Principe', 'SA' : 'Saudi Arabia', 'SN' : 'Senegal', 'RS' : 'Serbia', 'SC' : 'Seychelles', 'SL' : 'Sierra Leone', 'SG' : 'Singapore', 'SK' : 'Slovakia', 'SI' : 'Slovenia', 'SB' : 'Solomon Islands', 'SO' : 'Somalia', 'ZA' : 'South Africa', 'GS' : 'South Georgia And Sandwich Isl.', 'ES' : 'Spain', 'LK' : 'Sri Lanka', 'SD' : 'Sudan', 'SR' : 'Suriname', 'SJ' : 'Svalbard And Jan Mayen', 'SZ' : 'Swaziland', 'SE' : 'Sweden', 'CH' : 'Switzerland', 'SY' : 'Syrian Arab Republic', 'TW' : 'Taiwan', 'TJ' : 'Tajikistan', 'TZ' : 'Tanzania', 'TH' : 'Thailand', 'TL' : 'Timor-Leste', 'TG' : 'Togo', 'TK' : 'Tokelau', 'TO' : 'Tonga', 'TT' : 'Trinidad And Tobago', 'TN' : 'Tunisia', 'TR' : 'Turkey', 'TM' : 'Turkmenistan', 'TC' : 'Turks And Caicos Islands', 'TV' : 'Tuvalu', 'UG' : 'Uganda', 'UA' : 'Ukraine', 'AE' : 'United Arab Emirates', 'GB' : 'United Kingdom', 'US' : 'United States', 'UM' : 'United States Outlying Islands', 'UY' : 'Uruguay', 'UZ' : 'Uzbekistan', 'VU' : 'Vanuatu', 'VE' : 'Venezuela', 'VN' : 'Viet Nam', 'VG' : 'Virgin Islands, British', 'VI' : 'Virgin Islands, U.S.', 'WF' : 'Wallis And Futuna', 'EH' : 'Western Sahara', 'YE' : 'Yemen', 'ZM' : 'Zambia', 'ZW' : 'Zimbabwe' };\n\n\n// let country_list = [\"Afghanistan\", \"Albania\", \"Algeria\", \"Andorra\", \"Angola\", \"Anguilla\", \"Antigua &amp; Barbuda\", \"Argentina\", \"Armenia\", \"Aruba\", \"Australia\", \"Austria\", \"Azerbaijan\", \"Bahamas\", \"Bahrain\", \"Bangladesh\", \"Barbados\", \"Belarus\", \"Belgium\", \"Belize\", \"Benin\", \"Bermuda\", \"Bhutan\", \"Bolivia\", \"Bosnia &amp; Herzegovina\", \"Botswana\", \"Brazil\", \"British Virgin Islands\", \"Brunei\", \"Bulgaria\", \"Burkina Faso\", \"Burundi\", \"Cambodia\", \"Cameroon\", \"Cape Verde\", \"Cayman Islands\", \"Chad\", \"Chile\", \"China\", \"Colombia\", \"Congo\", \"Cook Islands\", \"Costa Rica\", \"Cote D Ivoire\", \"Croatia\", \"Cruise Ship\", \"Cuba\", \"Cyprus\", \"Czech Republic\", \"Denmark\", \"Djibouti\", \"Dominica\", \"Dominican Republic\", \"Ecuador\", \"Egypt\", \"El Salvador\", \"Equatorial Guinea\", \"Estonia\", \"Ethiopia\", \"Falkland Islands\", \"Faroe Islands\", \"Fiji\", \"Finland\", \"France\", \"French Polynesia\", \"French West Indies\", \"Gabon\", \"Gambia\", \"Georgia\", \"Germany\", \"Ghana\", \"Gibraltar\", \"Greece\", \"Greenland\", \"Grenada\", \"Guam\", \"Guatemala\", \"Guernsey\", \"Guinea\", \"Guinea Bissau\", \"Guyana\", \"Haiti\", \"Honduras\", \"Hong Kong\", \"Hungary\", \"Iceland\", \"India\", \"Indonesia\", \"Iran\", \"Iraq\", \"Ireland\", \"Isle of Man\", \"Israel\", \"Italy\", \"Jamaica\", \"Japan\", \"Jersey\", \"Jordan\", \"Kazakhstan\", \"Kenya\", \"Kuwait\", \"Kyrgyz Republic\", \"Laos\", \"Latvia\", \"Lebanon\", \"Lesotho\", \"Liberia\", \"Libya\", \"Liechtenstein\", \"Lithuania\", \"Luxembourg\", \"Macau\", \"Macedonia\", \"Madagascar\", \"Malawi\", \"Malaysia\", \"Maldives\", \"Mali\", \"Malta\", \"Mauritania\", \"Mauritius\", \"Mexico\", \"Moldova\", \"Monaco\", \"Mongolia\", \"Montenegro\", \"Montserrat\", \"Morocco\", \"Mozambique\", \"Namibia\", \"Nepal\", \"Netherlands\", \"Netherlands Antilles\", \"New Caledonia\", \"New Zealand\", \"Nicaragua\", \"Niger\", \"Nigeria\", \"Norway\", \"Oman\", \"Pakistan\", \"Palestine\", \"Panama\", \"Papua New Guinea\", \"Paraguay\", \"Peru\", \"Philippines\", \"Poland\", \"Portugal\", \"Puerto Rico\", \"Qatar\", \"Reunion\", \"Romania\", \"Russia\", \"Rwanda\", \"Saint Pierre &amp; Miquelon\", \"Samoa\", \"San Marino\", \"Satellite\", \"Saudi Arabia\", \"Senegal\", \"Serbia\", \"Seychelles\", \"Sierra Leone\", \"Singapore\", \"Slovakia\", \"Slovenia\", \"South Africa\", \"South Korea\", \"Spain\", \"Sri Lanka\", \"St Kitts &amp; Nevis\", \"St Lucia\", \"St Vincent\", \"St. Lucia\", \"Sudan\", \"Suriname\", \"Swaziland\", \"Sweden\", \"Switzerland\", \"Syria\", \"Taiwan\", \"Tajikistan\", \"Tanzania\", \"Thailand\", \"Timor L'Este\", \"Togo\", \"Tonga\", \"Trinidad &amp; Tobago\", \"Tunisia\", \"Turkey\", \"Turkmenistan\", \"Turks &amp; Caicos\", \"Uganda\", \"Ukraine\", \"United Arab Emirates\", \"United Kingdom\", \"Uruguay\", \"Uzbekistan\", \"Venezuela\", \"Vietnam\", \"Virgin Islands (US)\", \"Yemen\", \"Zambia\", \"Zimbabwe\"];\n\n"]},"metadata":{},"sourceType":"module"}