{"ast":null,"code":"// eslint-disable-next-line\nimport * as React from 'react';\nimport { createContainer } from \"unstated-next\";\nimport moment from 'moment';\nimport _ from 'lodash';\nimport { country_list } from './Map/countries'; // source : \"https://api.covid19api.com/\"\n// source : \"https://covidtracking.com/api/us/daily\"\n\nexport const useStore = () => {\n  const [country, setCountry] = React.useState(\"\");\n  const [code, setCode] = React.useState(\"\");\n  const [covidApi, setCovidApi] = React.useState([]);\n  const [countriesML, setCountriesML] = React.useState([]);\n  const [data, setData] = React.useState([]); // data for graph\n\n  const [dataDiff, setDataDiff] = React.useState([]); // data diff for graph\n\n  const [total, setTotal] = React.useState([]);\n  const [labels, setLabels] = React.useState([]);\n  const [markers, setMarkers] = React.useState([]);\n  const headers = new Headers({\n    \"Accept\": \"application/json\",\n    \"Content-Type\": \"application/json\",\n    \"User-Agent\": \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:78.0) Gecko/20100101 Firefox/78.0\"\n  });\n  const debug = true;\n\n  function globalDataGraph(data) {\n    let resultCases = [];\n    let resultDates = [];\n\n    for (let i in data) {\n      resultDates.push(i);\n      resultCases.push(data[i]);\n    } // console.log(resultCases, resultDates);\n\n\n    return {\n      resultCases,\n      resultDates\n    };\n  }\n\n  function countriesListData(data) {\n    let resultCases = [];\n    let resultCountries = [];\n    let result = [];\n\n    for (let i in data) {\n      resultCountries.push(data[i].Country);\n      resultCases.push(data[i].TotalConfirmed);\n      result.push({\n        country: data[i].Country,\n        TotalConfirmed: data[i].TotalConfirmed,\n        sortable: true\n      });\n    } // console.log(resultCases, resultCountries);\n\n\n    return {\n      result,\n      resultCases,\n      resultCountries\n    };\n  } // function countryDataGraph(data: IDataCovid[] | ICountry[], country: string, caseType: string, dateTo: string) {\n  //   let resultCases: any[] = []\n  //   let resultDates: any[] = []\n  //   if (data.length > 0) {\n  //     data.forEach((item: any) => {\n  //       // console.log(\"item : \", caseType, item[caseType], item);\n  //       if (country === 'us' || debug === true) {\n  //         if ((moment(item.last_update).isAfter(dateTo))) {\n  //           resultCases.push(caseType === \"confirmed\" ? item.cases : item[caseType]);\n  //           resultDates.push(moment(item.last_update).format('YYYY/MM/DD'));\n  //         }\n  //       } else {\n  //         if ((moment(item.Date).isAfter(dateTo))) {\n  //           resultCases.push(item.Cases);\n  //           resultDates.push(moment(item.Date).format('YYYY/MM/DD'));\n  //         }\n  //       }\n  //     })\n  //     let resultCasesDiff: any[] = _.map(resultCases, function (e: any, i: any) {\n  //       return (resultCases[i + 1] - e) < 0 ? 0 : (resultCases[i + 1] - e)\n  //     });\n  //     resultCasesDiff.pop();\n  //     resultCases.pop();\n  //     resultDates.pop();\n  //     dataDiff === [] ? console.log(dataDiff) : console.log('');\n  //     setData(resultCasesDiff);// inversion between resultCasesDiff and resultCases for display graph of variations and not total\n  //     setDataDiff(resultCases);\n  //     setLabels(resultDates);\n  //     return ({ resultCases, resultDates, resultCasesDiff });\n  //   } else {\n  //     setData([]);\n  //     setLabels([]);\n  //     setDataDiff([]);\n  //   }\n  // }\n  // function getCovidApi() :  get data by country\n  // differents source cause pb with USA, \n  // you cans get data according Country Code, date from  and case : confirmed, deaths, recovered\n  // have to use function countryDataGraph() to clean data and have an array to fit with D3js charts react-map-smples\n  // function getCovidApi(country: string, caseType: string, dateTo: string) {\n  //   if (country === \"\") {\n  //     countryDataGraph([], \"\", \"\", \"\");\n  //   } else {\n  //     try {\n  //       if (country === \"us\" || debug === true) {\n  //         return fetch(`https://covid19-api.org/api/timeline/${country}`, {\n  //           method: 'GET',\n  //           redirect: 'follow',\n  //           headers: headers\n  //         })\n  //           .then((response: any) => response.json()).then((res) => {\n  //             countryDataGraph(res.reverse(), country, caseType, dateTo);// cleaning data for ChartJS\n  //           }).catch(err => alert(err));\n  //       } else {\n  //         return fetch(`https://api.covid19api.com/country/${country}/status/${caseType}/live?from=${dateTo}&to=${moment().format('YYYY-MM-DDT00:00:00')}`, {\n  //           method: 'GET',\n  //           redirect: 'follow',\n  //           headers: headers\n  //         })\n  //           .then((response: any) => response.json()).then((res) => {\n  //             countryDataGraph(res, country, caseType, dateTo);// cleaning data for ChartJS\n  //           }).catch(err => alert(err));\n  //       }\n  //     } catch (err) {\n  //       console.log(err)\n  //       return;\n  //     }\n  //   }\n  // };\n  //  {/**\n  //   countryDataGraph function  : cleaning data from API covid19 to display the graph of  coronavirus evolution\n  //   data from function getDataCovid19()\n  //   @params data: json\n  //   @params country: string Finland\n  //   @params caseType: string : here newCases confirmed, but can change (confirmed, deaths, recoveres)\n  //   @params dateTo: string dateTime in string for begining of the survey\n  //   @return response : json from the api url\n  // */}\n\n\n  function countryDataGraph(data, country, caseType, dateTo) {\n    let resultCases = [];\n    let resultDates = [];\n\n    if (data.length > 0) {\n      // array of dates and cases for graph of covid 19 : it represents X(date) - Y(cases) \n      data.forEach(item => {\n        if (moment(item.Date).isAfter(dateTo)) {\n          resultCases.push(item.Cases);\n          resultDates.push(moment(item.Date).format('YYYY/MM/DD'));\n        }\n      }); // creating a array of covid Value for every day : have to make a substraction with the previous day \n      // because the api only give the amout of new cases per day\n\n      let resultCasesDiff = _.map(resultCases, function (e, i) {\n        return resultCases[i + 1] - e < 0 ? 0 : resultCases[i + 1] - e;\n      }); // cleaning the last value cause it doesn't make sense with our substraction (can't do a substraction on the first value with nothing )\n\n\n      resultCasesDiff.pop();\n      resultCases.pop();\n      resultDates.pop(); // data for the graph rechartjs2\n\n      setDataDiff(resultCasesDiff);\n      setData(resultCases);\n      setLabels(resultDates); // info for the new cases today : last result of our data array\n\n      setLastCases(resultCasesDiff[resultCasesDiff.length - 1]);\n    }\n  } //  {/**\n  //     getDataCovid function  : get data from API covid19 fro the graph\n  //     @params \n  //     @return response : json from the api url to send to countryDataGraph() fot treatment\n  //   */}  \n\n\n  const getDataCovid = async (country, caseType, dateTo) => {\n    try {\n      // const country: string = 'finland'; // you can choose another country \n      // const caseType: string = 'confirmed'; // possibles API options request : confirmed, recovered and deaths\n      // you can change the amount of months for covid 19 : i took just 2 months but you can take more or less but the graph will be more or less compact starting from today\n      // const dateTo: string = `${moment().subtract(2, 'months').format()}`\n      // you can choose another $country, others $caseType: confirmed, recovered and deaths\n      await fetch(`https://api.covid19api.com/country/${country}/status/${caseType}/live?from=${dateTo}&to=${moment().format('YYYY-MM-DDT00:00:00')}`, {\n        method: 'GET',\n        redirect: 'follow',\n        headers: headers\n      }).then(response => response.json()).then(res => {\n        // the json only give the amouts of cases per day, need to do a difference\n        countryDataGraph(res, country, caseType, dateTo); // cleaning data for ChartJS\n      }).catch(err => alert(err));\n    } catch (err) {\n      console.error(err.message);\n    }\n  }; // to set unstated.total data : {Global, Countries,..} all total data of today\n\n\n  const getTotal = async () => {\n    await fetch(`https://api.covid19api.com/summary`).then(res => res.json()).then(resp => setTotal(resp)).catch(err => {\n      throw err;\n    });\n  };\n\n  const getCovidCountry = async (country, caseType, dateTo) => {\n    setCovidApi((await getCovidApi(country, caseType, dateTo))); // console.log(`https://covid19-api.org/api/timeline/${country}`)\n    // console.log(`https://api.covid19api.com/country/${country}/status/${caseType}/live?from=${dateTo}&to=${moment().format('YYYY-MM-DDT00:00:00')}`)\n  };\n\n  const updateTotalCovid = async () => {\n    setTotal((await getTotal()));\n  }; // =================================================\n  // function matching data for the map : react map simples\n  // source (`https://api.covid19api.com/all`, {\n\n\n  function getMarkers(arr1, arr2) {\n    return _.union(_.map(arr1, function (obj1) {\n      var same = _.find(arr2, function (obj2) {\n        return obj1[\"CountryCode\"] === obj2[\"code\"];\n      });\n\n      return same ? _.extend(obj1, same) : obj1;\n    }), _.reject(arr2, function (obj2) {\n      return _.find(arr1, function (obj1) {\n        return obj2[\"code\"] === obj1[\"CountryCode\"];\n      });\n    }));\n  } //order \n\n\n  function dynamicSort(property) {\n    var sortOrder = 1;\n\n    if (property[0] === \"-\") {\n      sortOrder = -1;\n      property = property.substr(1);\n    }\n\n    return function (b, a) {\n      /* next line works with strings and numbers, \n       * and you may want to customize it to your needs\n       */\n      var result = a[property] < b[property] ? -1 : a[property] > b[property] ? 1 : 0;\n      return result * sortOrder;\n    };\n  }\n\n  function getCovidMapMarkers() {\n    fetch(`https://api.covid19api.com/summary`, {\n      method: \"GET\"\n    }).then(response => response.json()).then(res => {\n      // console.log(\"***********************\", res.Countries);\n      let resp = getMarkers(res.Countries, country_list);\n      setMarkers(resp.sort(dynamicSort(\"TotalConfirmed\"))); // console.log(resp);\n\n      return resp;\n    }).catch(err => alert(err));\n  }\n\n  function getCountriesML() {\n    try {\n      return fetch(`\"https://covid19-api.org/api/status\"`, {\n        method: \"GET\"\n      }).then(response => response.text());\n    } catch (err) {\n      console.log(err);\n      return;\n    }\n  }\n\n  ;\n\n  const updateCountriesML = async () => {\n    setCountriesML((await getCountriesML()));\n  };\n\n  return {\n    covidApi,\n    country_list,\n    data,\n    labels,\n    total,\n    country,\n    code,\n    markers,\n    countriesML,\n    setCountry,\n    setCode,\n    getTotal,\n    getCovidCountry,\n    updateTotalCovid,\n    countryDataGraph,\n    globalDataGraph,\n    countriesListData,\n    getCovidMapMarkers,\n    updateCountriesML\n  };\n};\nexport const StoreContainer = createContainer(useStore); // let country_list = { 'AF' : 'Afghanistan', 'AX' : 'Aland Islands', 'AL' : 'Albania', 'DZ' : 'Algeria', 'AS' : 'American Samoa', 'AD' : 'Andorra', 'AO' : 'Angola', 'AI' : 'Anguilla', 'AQ' : 'Antarctica', 'AG' : 'Antigua And Barbuda', 'AR' : 'Argentina', 'AM' : 'Armenia', 'AW' : 'Aruba', 'AU' : 'Australia', 'AT' : 'Austria', 'AZ' : 'Azerbaijan', 'BS' : 'Bahamas', 'BH' : 'Bahrain', 'BD' : 'Bangladesh', 'BB' : 'Barbados', 'BY' : 'Belarus', 'BE' : 'Belgium', 'BZ' : 'Belize', 'BJ' : 'Benin', 'BM' : 'Bermuda', 'BT' : 'Bhutan', 'BO' : 'Bolivia', 'BA' : 'Bosnia And Herzegovina', 'BW' : 'Botswana', 'BV' : 'Bouvet Island', 'BR' : 'Brazil', 'IO' : 'British Indian Ocean Territory', 'BN' : 'Brunei Darussalam', 'BG' : 'Bulgaria', 'BF' : 'Burkina Faso', 'BI' : 'Burundi', 'KH' : 'Cambodia', 'CM' : 'Cameroon', 'CA' : 'Canada', 'CV' : 'Cape Verde', 'KY' : 'Cayman Islands', 'CF' : 'Central African Republic', 'TD' : 'Chad', 'CL' : 'Chile', 'CN' : 'China', 'CX' : 'Christmas Island', 'CC' : 'Cocos (Keeling) Islands', 'CO' : 'Colombia', 'KM' : 'Comoros', 'CG' : 'Congo', 'CD' : 'Congo, Democratic Republic', 'CK' : 'Cook Islands', 'CR' : 'Costa Rica', 'CI' : 'Cote D\\'Ivoire', 'HR' : 'Croatia', 'CU' : 'Cuba', 'CY' : 'Cyprus', 'CZ' : 'Czech Republic', 'DK' : 'Denmark', 'DJ' : 'Djibouti', 'DM' : 'Dominica', 'DO' : 'Dominican Republic', 'EC' : 'Ecuador', 'EG' : 'Egypt', 'SV' : 'El Salvador', 'GQ' : 'Equatorial Guinea', 'ER' : 'Eritrea', 'EE' : 'Estonia', 'ET' : 'Ethiopia', 'FK' : 'Falkland Islands (Malvinas)', 'FO' : 'Faroe Islands', 'FJ' : 'Fiji', 'FI' : 'Finland', 'FR' : 'France', 'GF' : 'French Guiana', 'PF' : 'French Polynesia', 'TF' : 'French Southern Territories', 'GA' : 'Gabon', 'GM' : 'Gambia', 'GE' : 'Georgia', 'DE' : 'Germany', 'GH' : 'Ghana', 'GI' : 'Gibraltar', 'GR' : 'Greece', 'GL' : 'Greenland', 'GD' : 'Grenada', 'GP' : 'Guadeloupe', 'GU' : 'Guam', 'GT' : 'Guatemala', 'GG' : 'Guernsey', 'GN' : 'Guinea', 'GW' : 'Guinea-Bissau', 'GY' : 'Guyana', 'HT' : 'Haiti', 'HM' : 'Heard Island & Mcdonald Islands', 'VA' : 'Holy See (Vatican City State)', 'HN' : 'Honduras', 'HK' : 'Hong Kong', 'HU' : 'Hungary', 'IS' : 'Iceland', 'IN' : 'India', 'ID' : 'Indonesia', 'IR' : 'Iran, Islamic Republic Of', 'IQ' : 'Iraq', 'IE' : 'Ireland', 'IM' : 'Isle Of Man', 'IL' : 'Israel', 'IT' : 'Italy', 'JM' : 'Jamaica', 'JP' : 'Japan', 'JE' : 'Jersey', 'JO' : 'Jordan', 'KZ' : 'Kazakhstan', 'KE' : 'Kenya', 'KI' : 'Kiribati', 'KR' : 'Korea', 'KW' : 'Kuwait', 'KG' : 'Kyrgyzstan', 'LA' : 'Lao People\\'s Democratic Republic', 'LV' : 'Latvia', 'LB' : 'Lebanon', 'LS' : 'Lesotho', 'LR' : 'Liberia', 'LY' : 'Libyan Arab Jamahiriya', 'LI' : 'Liechtenstein', 'LT' : 'Lithuania', 'LU' : 'Luxembourg', 'MO' : 'Macao', 'MK' : 'Macedonia', 'MG' : 'Madagascar', 'MW' : 'Malawi', 'MY' : 'Malaysia', 'MV' : 'Maldives', 'ML' : 'Mali', 'MT' : 'Malta', 'MH' : 'Marshall Islands', 'MQ' : 'Martinique', 'MR' : 'Mauritania', 'MU' : 'Mauritius', 'YT' : 'Mayotte', 'MX' : 'Mexico', 'FM' : 'Micronesia, Federated States Of', 'MD' : 'Moldova', 'MC' : 'Monaco', 'MN' : 'Mongolia', 'ME' : 'Montenegro', 'MS' : 'Montserrat', 'MA' : 'Morocco', 'MZ' : 'Mozambique', 'MM' : 'Myanmar', 'NA' : 'Namibia', 'NR' : 'Nauru', 'NP' : 'Nepal', 'NL' : 'Netherlands', 'AN' : 'Netherlands Antilles', 'NC' : 'New Caledonia', 'NZ' : 'New Zealand', 'NI' : 'Nicaragua', 'NE' : 'Niger', 'NG' : 'Nigeria', 'NU' : 'Niue', 'NF' : 'Norfolk Island', 'MP' : 'Northern Mariana Islands', 'NO' : 'Norway', 'OM' : 'Oman', 'PK' : 'Pakistan', 'PW' : 'Palau', 'PS' : 'Palestinian Territory, Occupied', 'PA' : 'Panama', 'PG' : 'Papua New Guinea', 'PY' : 'Paraguay', 'PE' : 'Peru', 'PH' : 'Philippines', 'PN' : 'Pitcairn', 'PL' : 'Poland', 'PT' : 'Portugal', 'PR' : 'Puerto Rico', 'QA' : 'Qatar', 'RE' : 'Reunion', 'RO' : 'Romania', 'RU' : 'Russian Federation', 'RW' : 'Rwanda', 'BL' : 'Saint Barthelemy', 'SH' : 'Saint Helena', 'KN' : 'Saint Kitts And Nevis', 'LC' : 'Saint Lucia', 'MF' : 'Saint Martin', 'PM' : 'Saint Pierre And Miquelon', 'VC' : 'Saint Vincent And Grenadines', 'WS' : 'Samoa', 'SM' : 'San Marino', 'ST' : 'Sao Tome And Principe', 'SA' : 'Saudi Arabia', 'SN' : 'Senegal', 'RS' : 'Serbia', 'SC' : 'Seychelles', 'SL' : 'Sierra Leone', 'SG' : 'Singapore', 'SK' : 'Slovakia', 'SI' : 'Slovenia', 'SB' : 'Solomon Islands', 'SO' : 'Somalia', 'ZA' : 'South Africa', 'GS' : 'South Georgia And Sandwich Isl.', 'ES' : 'Spain', 'LK' : 'Sri Lanka', 'SD' : 'Sudan', 'SR' : 'Suriname', 'SJ' : 'Svalbard And Jan Mayen', 'SZ' : 'Swaziland', 'SE' : 'Sweden', 'CH' : 'Switzerland', 'SY' : 'Syrian Arab Republic', 'TW' : 'Taiwan', 'TJ' : 'Tajikistan', 'TZ' : 'Tanzania', 'TH' : 'Thailand', 'TL' : 'Timor-Leste', 'TG' : 'Togo', 'TK' : 'Tokelau', 'TO' : 'Tonga', 'TT' : 'Trinidad And Tobago', 'TN' : 'Tunisia', 'TR' : 'Turkey', 'TM' : 'Turkmenistan', 'TC' : 'Turks And Caicos Islands', 'TV' : 'Tuvalu', 'UG' : 'Uganda', 'UA' : 'Ukraine', 'AE' : 'United Arab Emirates', 'GB' : 'United Kingdom', 'US' : 'United States', 'UM' : 'United States Outlying Islands', 'UY' : 'Uruguay', 'UZ' : 'Uzbekistan', 'VU' : 'Vanuatu', 'VE' : 'Venezuela', 'VN' : 'Viet Nam', 'VG' : 'Virgin Islands, British', 'VI' : 'Virgin Islands, U.S.', 'WF' : 'Wallis And Futuna', 'EH' : 'Western Sahara', 'YE' : 'Yemen', 'ZM' : 'Zambia', 'ZW' : 'Zimbabwe' };\n// let country_list = [\"Afghanistan\", \"Albania\", \"Algeria\", \"Andorra\", \"Angola\", \"Anguilla\", \"Antigua &amp; Barbuda\", \"Argentina\", \"Armenia\", \"Aruba\", \"Australia\", \"Austria\", \"Azerbaijan\", \"Bahamas\", \"Bahrain\", \"Bangladesh\", \"Barbados\", \"Belarus\", \"Belgium\", \"Belize\", \"Benin\", \"Bermuda\", \"Bhutan\", \"Bolivia\", \"Bosnia &amp; Herzegovina\", \"Botswana\", \"Brazil\", \"British Virgin Islands\", \"Brunei\", \"Bulgaria\", \"Burkina Faso\", \"Burundi\", \"Cambodia\", \"Cameroon\", \"Cape Verde\", \"Cayman Islands\", \"Chad\", \"Chile\", \"China\", \"Colombia\", \"Congo\", \"Cook Islands\", \"Costa Rica\", \"Cote D Ivoire\", \"Croatia\", \"Cruise Ship\", \"Cuba\", \"Cyprus\", \"Czech Republic\", \"Denmark\", \"Djibouti\", \"Dominica\", \"Dominican Republic\", \"Ecuador\", \"Egypt\", \"El Salvador\", \"Equatorial Guinea\", \"Estonia\", \"Ethiopia\", \"Falkland Islands\", \"Faroe Islands\", \"Fiji\", \"Finland\", \"France\", \"French Polynesia\", \"French West Indies\", \"Gabon\", \"Gambia\", \"Georgia\", \"Germany\", \"Ghana\", \"Gibraltar\", \"Greece\", \"Greenland\", \"Grenada\", \"Guam\", \"Guatemala\", \"Guernsey\", \"Guinea\", \"Guinea Bissau\", \"Guyana\", \"Haiti\", \"Honduras\", \"Hong Kong\", \"Hungary\", \"Iceland\", \"India\", \"Indonesia\", \"Iran\", \"Iraq\", \"Ireland\", \"Isle of Man\", \"Israel\", \"Italy\", \"Jamaica\", \"Japan\", \"Jersey\", \"Jordan\", \"Kazakhstan\", \"Kenya\", \"Kuwait\", \"Kyrgyz Republic\", \"Laos\", \"Latvia\", \"Lebanon\", \"Lesotho\", \"Liberia\", \"Libya\", \"Liechtenstein\", \"Lithuania\", \"Luxembourg\", \"Macau\", \"Macedonia\", \"Madagascar\", \"Malawi\", \"Malaysia\", \"Maldives\", \"Mali\", \"Malta\", \"Mauritania\", \"Mauritius\", \"Mexico\", \"Moldova\", \"Monaco\", \"Mongolia\", \"Montenegro\", \"Montserrat\", \"Morocco\", \"Mozambique\", \"Namibia\", \"Nepal\", \"Netherlands\", \"Netherlands Antilles\", \"New Caledonia\", \"New Zealand\", \"Nicaragua\", \"Niger\", \"Nigeria\", \"Norway\", \"Oman\", \"Pakistan\", \"Palestine\", \"Panama\", \"Papua New Guinea\", \"Paraguay\", \"Peru\", \"Philippines\", \"Poland\", \"Portugal\", \"Puerto Rico\", \"Qatar\", \"Reunion\", \"Romania\", \"Russia\", \"Rwanda\", \"Saint Pierre &amp; Miquelon\", \"Samoa\", \"San Marino\", \"Satellite\", \"Saudi Arabia\", \"Senegal\", \"Serbia\", \"Seychelles\", \"Sierra Leone\", \"Singapore\", \"Slovakia\", \"Slovenia\", \"South Africa\", \"South Korea\", \"Spain\", \"Sri Lanka\", \"St Kitts &amp; Nevis\", \"St Lucia\", \"St Vincent\", \"St. Lucia\", \"Sudan\", \"Suriname\", \"Swaziland\", \"Sweden\", \"Switzerland\", \"Syria\", \"Taiwan\", \"Tajikistan\", \"Tanzania\", \"Thailand\", \"Timor L'Este\", \"Togo\", \"Tonga\", \"Trinidad &amp; Tobago\", \"Tunisia\", \"Turkey\", \"Turkmenistan\", \"Turks &amp; Caicos\", \"Uganda\", \"Ukraine\", \"United Arab Emirates\", \"United Kingdom\", \"Uruguay\", \"Uzbekistan\", \"Venezuela\", \"Vietnam\", \"Virgin Islands (US)\", \"Yemen\", \"Zambia\", \"Zimbabwe\"];","map":{"version":3,"sources":["/Users/rims/Documents/Projects/covid19/src/components/Store.tsx"],"names":["React","createContainer","moment","_","country_list","useStore","country","setCountry","useState","code","setCode","covidApi","setCovidApi","countriesML","setCountriesML","data","setData","dataDiff","setDataDiff","total","setTotal","labels","setLabels","markers","setMarkers","headers","Headers","debug","globalDataGraph","resultCases","resultDates","i","push","countriesListData","resultCountries","result","Country","TotalConfirmed","sortable","countryDataGraph","caseType","dateTo","length","forEach","item","Date","isAfter","Cases","format","resultCasesDiff","map","e","pop","setLastCases","getDataCovid","fetch","method","redirect","then","response","json","res","catch","err","alert","console","error","message","getTotal","resp","getCovidCountry","getCovidApi","updateTotalCovid","getMarkers","arr1","arr2","union","obj1","same","find","obj2","extend","reject","dynamicSort","property","sortOrder","substr","b","a","getCovidMapMarkers","Countries","sort","getCountriesML","text","log","updateCountriesML","StoreContainer"],"mappings":"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","sourcesContent":["// eslint-disable-next-line\nimport * as React from 'react';\nimport { createContainer } from \"unstated-next\";\nimport moment from 'moment';\nimport _ from 'lodash';\nimport { country_list } from './Map/countries';\n// source : \"https://api.covid19api.com/\"\n// source : \"https://covidtracking.com/api/us/daily\"\n\ninterface ICountryData {\n  Cases: Number,\n  City: String,\n  CityName: String,\n  Country: String,\n  CountryName: String,\n  Date: Date,\n  Lat: String,\n  Lon: String,\n  Province: String,\n  Status: String,\n}\n\ninterface IGlobalData {\n  NewConfirmed: Number,\n  NewDeaths: Number,\n  NewRecovered: Number,\n  TotalConfirmed: Number,\n  TotalDeaths: Number,\n  TotalRecovered: Number\n}\n\ninterface ICountry {\n  Country: string,\n  CountryName: string,\n  Slug: string,\n  NewConfirmed: number,\n  TotalConfirmed: number,\n  NewDeaths: number,\n  TotalDeaths: number,\n  NewRecovered: number,\n  TotalRecovered: number,\n  Date: Date\n}\n\ninterface IDataCovid {\n  country: string,\n  cases: number,\n  deaths: number,\n  recovered: number,\n  last_update: Date\n}\n\ninterface ICountries {\n  timezones: string[],\n  latlon?: string[],\n  lat?: number,\n  lon?: number,\n  name: string,\n  code: string,\n  capital: string\n}\n\nexport const useStore = () => {\n  const [country, setCountry] = React.useState<string>(\"\");\n  const [code, setCode] = React.useState<string>(\"\");\n  const [covidApi, setCovidApi] = React.useState<Object[] | null | void | undefined>([]);\n  const [countriesML, setCountriesML] = React.useState<Object[] | any>([]);\n  const [data, setData] = React.useState<Object[] | void | null | undefined>([]);// data for graph\n  const [dataDiff, setDataDiff] = React.useState<number[] | any[] | undefined>([]);// data diff for graph\n  const [total, setTotal] = React.useState<IGlobalData[] | void | null | undefined>([]);\n  const [labels, setLabels] = React.useState<Object[] | void | null | undefined>([]);\n  const [markers, setMarkers] = React.useState<any[] | undefined>([]);\n  const headers = new Headers({\n    \"Accept\": \"application/json\",\n    \"Content-Type\": \"application/json\",\n    \"User-Agent\": \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:78.0) Gecko/20100101 Firefox/78.0\"\n  });\n\n  const debug: boolean = true;\n\n  function globalDataGraph(data: any) {\n    let resultCases: any[] = []\n    let resultDates: any[] = []\n    for (let i in data) {\n      resultDates.push(i);\n      resultCases.push(data[i]);\n    }\n    // console.log(resultCases, resultDates);\n    return ({ resultCases, resultDates });\n  }\n\n  function countriesListData(data: ICountry[]) {\n    let resultCases: any[] = []\n    let resultCountries: any[] = []\n    let result: any[] = []\n    for (let i in data) {\n      resultCountries.push(data[i].Country);\n      resultCases.push(data[i].TotalConfirmed);\n      result.push({\n        country: data[i].Country, TotalConfirmed: data[i].TotalConfirmed,\n        sortable: true,\n      })\n    }\n    // console.log(resultCases, resultCountries);\n    return ({ result, resultCases, resultCountries });\n  }\n\n  // function countryDataGraph(data: IDataCovid[] | ICountry[], country: string, caseType: string, dateTo: string) {\n  //   let resultCases: any[] = []\n  //   let resultDates: any[] = []\n  //   if (data.length > 0) {\n  //     data.forEach((item: any) => {\n  //       // console.log(\"item : \", caseType, item[caseType], item);\n  //       if (country === 'us' || debug === true) {\n  //         if ((moment(item.last_update).isAfter(dateTo))) {\n  //           resultCases.push(caseType === \"confirmed\" ? item.cases : item[caseType]);\n  //           resultDates.push(moment(item.last_update).format('YYYY/MM/DD'));\n  //         }\n  //       } else {\n  //         if ((moment(item.Date).isAfter(dateTo))) {\n  //           resultCases.push(item.Cases);\n  //           resultDates.push(moment(item.Date).format('YYYY/MM/DD'));\n  //         }\n  //       }\n  //     })\n  //     let resultCasesDiff: any[] = _.map(resultCases, function (e: any, i: any) {\n  //       return (resultCases[i + 1] - e) < 0 ? 0 : (resultCases[i + 1] - e)\n  //     });\n  //     resultCasesDiff.pop();\n  //     resultCases.pop();\n  //     resultDates.pop();\n  //     dataDiff === [] ? console.log(dataDiff) : console.log('');\n  //     setData(resultCasesDiff);// inversion between resultCasesDiff and resultCases for display graph of variations and not total\n  //     setDataDiff(resultCases);\n  //     setLabels(resultDates);\n  //     return ({ resultCases, resultDates, resultCasesDiff });\n  //   } else {\n  //     setData([]);\n  //     setLabels([]);\n  //     setDataDiff([]);\n\n  //   }\n  // }\n\n  // function getCovidApi() :  get data by country\n  // differents source cause pb with USA, \n  // you cans get data according Country Code, date from  and case : confirmed, deaths, recovered\n  // have to use function countryDataGraph() to clean data and have an array to fit with D3js charts react-map-smples\n  // function getCovidApi(country: string, caseType: string, dateTo: string) {\n  //   if (country === \"\") {\n  //     countryDataGraph([], \"\", \"\", \"\");\n  //   } else {\n  //     try {\n  //       if (country === \"us\" || debug === true) {\n  //         return fetch(`https://covid19-api.org/api/timeline/${country}`, {\n  //           method: 'GET',\n  //           redirect: 'follow',\n  //           headers: headers\n  //         })\n  //           .then((response: any) => response.json()).then((res) => {\n  //             countryDataGraph(res.reverse(), country, caseType, dateTo);// cleaning data for ChartJS\n  //           }).catch(err => alert(err));\n  //       } else {\n  //         return fetch(`https://api.covid19api.com/country/${country}/status/${caseType}/live?from=${dateTo}&to=${moment().format('YYYY-MM-DDT00:00:00')}`, {\n  //           method: 'GET',\n  //           redirect: 'follow',\n  //           headers: headers\n  //         })\n  //           .then((response: any) => response.json()).then((res) => {\n  //             countryDataGraph(res, country, caseType, dateTo);// cleaning data for ChartJS\n  //           }).catch(err => alert(err));\n  //       }\n  //     } catch (err) {\n  //       console.log(err)\n  //       return;\n  //     }\n  //   }\n  // };\n\n\n    //  {/**\n  //   countryDataGraph function  : cleaning data from API covid19 to display the graph of  coronavirus evolution\n  //   data from function getDataCovid19()\n  //   @params data: json\n  //   @params country: string Finland\n  //   @params caseType: string : here newCases confirmed, but can change (confirmed, deaths, recoveres)\n  //   @params dateTo: string dateTime in string for begining of the survey\n  //   @return response : json from the api url\n  // */}\n  function countryDataGraph(data: any, country: string, caseType: string, dateTo: string) {\n    let resultCases: any[] = []\n    let resultDates: any[] = []\n    if (data.length > 0) {\n      // array of dates and cases for graph of covid 19 : it represents X(date) - Y(cases) \n      data.forEach((item: any) => {\n        if ((moment(item.Date).isAfter(dateTo))) {\n          resultCases.push(item.Cases);\n          resultDates.push(moment(item.Date).format('YYYY/MM/DD'));\n        }\n      })\n      // creating a array of covid Value for every day : have to make a substraction with the previous day \n      // because the api only give the amout of new cases per day\n      let resultCasesDiff: any[] = _.map(resultCases, function (e: any, i: any) {\n        return (resultCases[i + 1] - e) < 0 ? 0 : (resultCases[i + 1] - e)\n      });\n      // cleaning the last value cause it doesn't make sense with our substraction (can't do a substraction on the first value with nothing )\n      resultCasesDiff.pop();\n      resultCases.pop();\n      resultDates.pop();\n      // data for the graph rechartjs2\n      setDataDiff(resultCasesDiff);\n      setData(resultCases);\n      setLabels(resultDates);\n      // info for the new cases today : last result of our data array\n      setLastCases(resultCasesDiff[resultCasesDiff.length - 1])\n    }\n  }\n  //  {/**\n//     getDataCovid function  : get data from API covid19 fro the graph\n//     @params \n//     @return response : json from the api url to send to countryDataGraph() fot treatment\n//   */}  \nconst getDataCovid = async (country: string, caseType: string, dateTo: string) => {\n  try {\n    // const country: string = 'finland'; // you can choose another country \n    // const caseType: string = 'confirmed'; // possibles API options request : confirmed, recovered and deaths\n    // you can change the amount of months for covid 19 : i took just 2 months but you can take more or less but the graph will be more or less compact starting from today\n    // const dateTo: string = `${moment().subtract(2, 'months').format()}`\n    // you can choose another $country, others $caseType: confirmed, recovered and deaths\n    await fetch(`https://api.covid19api.com/country/${country}/status/${caseType}/live?from=${dateTo}&to=${moment().format('YYYY-MM-DDT00:00:00')}`, {\n      method: 'GET',\n      redirect: 'follow',\n      headers: headers\n    })\n      .then((response: any) => response.json()).then((res) => {\n        // the json only give the amouts of cases per day, need to do a difference\n        countryDataGraph(res, country, caseType, dateTo);// cleaning data for ChartJS\n      }).catch(err => alert(err));\n  } catch (err) {\n    console.error(err.message);\n  }\n}\n\n\n  // to set unstated.total data : {Global, Countries,..} all total data of today\n  const getTotal = async () => {\n    await fetch(`https://api.covid19api.com/summary`)\n      .then(res => res.json())\n      .then(resp => setTotal(resp))\n      .catch((err) => { throw (err) })\n  }\n\n  const getCovidCountry = async (country: string, caseType: string, dateTo: string) => {\n    setCovidApi(await getCovidApi(country, caseType, dateTo));\n    // console.log(`https://covid19-api.org/api/timeline/${country}`)\n    // console.log(`https://api.covid19api.com/country/${country}/status/${caseType}/live?from=${dateTo}&to=${moment().format('YYYY-MM-DDT00:00:00')}`)\n  }\n\n\n  const updateTotalCovid = async () => {\n    setTotal(await getTotal());\n  }\n\n  // =================================================\n\n  // function matching data for the map : react map simples\n  // source (`https://api.covid19api.com/all`, {\n  function getMarkers(arr1: any, arr2: any) {\n    return _.union(\n      _.map(arr1, function (obj1) {\n        var same = _.find(arr2, function (obj2) {\n          return obj1[\"CountryCode\"] === obj2[\"code\"];\n        });\n        return same ? _.extend(obj1, same) : obj1;\n      }),\n      _.reject(arr2, function (obj2) {\n        return _.find(arr1, function (obj1) {\n          return obj2[\"code\"] === obj1[\"CountryCode\"];\n        });\n      })\n    );\n  }\n\n  //order \n  function dynamicSort(property: any) {\n    var sortOrder = 1;\n    if (property[0] === \"-\") {\n      sortOrder = -1;\n      property = property.substr(1);\n    }\n    return function (b: any, a: any) {\n      /* next line works with strings and numbers, \n       * and you may want to customize it to your needs\n       */\n      var result = (a[property] < b[property]) ? -1 : (a[property] > b[property]) ? 1 : 0;\n      return result * sortOrder;\n    }\n  }\n  function getCovidMapMarkers() {\n    fetch(`https://api.covid19api.com/summary`, {\n      method: \"GET\",\n    }).then((response: any) => response.json()).then((res) => {\n      // console.log(\"***********************\", res.Countries);\n      let resp = getMarkers(res.Countries, country_list);\n      setMarkers(resp.sort(dynamicSort(\"TotalConfirmed\")));\n      // console.log(resp);\n      return (resp);\n    }).catch(err => alert(err));\n  }\n\n  function getCountriesML() {\n    try {\n      return fetch(`\"https://covid19-api.org/api/status\"`, {\n        method: \"GET\",\n      }).then((response: any) => response.text())\n    } catch (err) {\n      console.log(err)\n      return;\n    }\n  };\n\n  const updateCountriesML = async () => {\n    setCountriesML(await getCountriesML());\n  }\n\n  return {\n    covidApi,\n    country_list,\n    data,\n    labels,\n    total,\n    country,\n    code,\n    markers,\n    countriesML,\n    setCountry,\n    setCode,\n    getTotal,\n    getCovidCountry,\n    updateTotalCovid,\n    countryDataGraph,\n    globalDataGraph,\n    countriesListData,\n    getCovidMapMarkers,\n    updateCountriesML,\n  };\n}\nexport const StoreContainer = createContainer(useStore)\n\n// let country_list = { 'AF' : 'Afghanistan', 'AX' : 'Aland Islands', 'AL' : 'Albania', 'DZ' : 'Algeria', 'AS' : 'American Samoa', 'AD' : 'Andorra', 'AO' : 'Angola', 'AI' : 'Anguilla', 'AQ' : 'Antarctica', 'AG' : 'Antigua And Barbuda', 'AR' : 'Argentina', 'AM' : 'Armenia', 'AW' : 'Aruba', 'AU' : 'Australia', 'AT' : 'Austria', 'AZ' : 'Azerbaijan', 'BS' : 'Bahamas', 'BH' : 'Bahrain', 'BD' : 'Bangladesh', 'BB' : 'Barbados', 'BY' : 'Belarus', 'BE' : 'Belgium', 'BZ' : 'Belize', 'BJ' : 'Benin', 'BM' : 'Bermuda', 'BT' : 'Bhutan', 'BO' : 'Bolivia', 'BA' : 'Bosnia And Herzegovina', 'BW' : 'Botswana', 'BV' : 'Bouvet Island', 'BR' : 'Brazil', 'IO' : 'British Indian Ocean Territory', 'BN' : 'Brunei Darussalam', 'BG' : 'Bulgaria', 'BF' : 'Burkina Faso', 'BI' : 'Burundi', 'KH' : 'Cambodia', 'CM' : 'Cameroon', 'CA' : 'Canada', 'CV' : 'Cape Verde', 'KY' : 'Cayman Islands', 'CF' : 'Central African Republic', 'TD' : 'Chad', 'CL' : 'Chile', 'CN' : 'China', 'CX' : 'Christmas Island', 'CC' : 'Cocos (Keeling) Islands', 'CO' : 'Colombia', 'KM' : 'Comoros', 'CG' : 'Congo', 'CD' : 'Congo, Democratic Republic', 'CK' : 'Cook Islands', 'CR' : 'Costa Rica', 'CI' : 'Cote D\\'Ivoire', 'HR' : 'Croatia', 'CU' : 'Cuba', 'CY' : 'Cyprus', 'CZ' : 'Czech Republic', 'DK' : 'Denmark', 'DJ' : 'Djibouti', 'DM' : 'Dominica', 'DO' : 'Dominican Republic', 'EC' : 'Ecuador', 'EG' : 'Egypt', 'SV' : 'El Salvador', 'GQ' : 'Equatorial Guinea', 'ER' : 'Eritrea', 'EE' : 'Estonia', 'ET' : 'Ethiopia', 'FK' : 'Falkland Islands (Malvinas)', 'FO' : 'Faroe Islands', 'FJ' : 'Fiji', 'FI' : 'Finland', 'FR' : 'France', 'GF' : 'French Guiana', 'PF' : 'French Polynesia', 'TF' : 'French Southern Territories', 'GA' : 'Gabon', 'GM' : 'Gambia', 'GE' : 'Georgia', 'DE' : 'Germany', 'GH' : 'Ghana', 'GI' : 'Gibraltar', 'GR' : 'Greece', 'GL' : 'Greenland', 'GD' : 'Grenada', 'GP' : 'Guadeloupe', 'GU' : 'Guam', 'GT' : 'Guatemala', 'GG' : 'Guernsey', 'GN' : 'Guinea', 'GW' : 'Guinea-Bissau', 'GY' : 'Guyana', 'HT' : 'Haiti', 'HM' : 'Heard Island & Mcdonald Islands', 'VA' : 'Holy See (Vatican City State)', 'HN' : 'Honduras', 'HK' : 'Hong Kong', 'HU' : 'Hungary', 'IS' : 'Iceland', 'IN' : 'India', 'ID' : 'Indonesia', 'IR' : 'Iran, Islamic Republic Of', 'IQ' : 'Iraq', 'IE' : 'Ireland', 'IM' : 'Isle Of Man', 'IL' : 'Israel', 'IT' : 'Italy', 'JM' : 'Jamaica', 'JP' : 'Japan', 'JE' : 'Jersey', 'JO' : 'Jordan', 'KZ' : 'Kazakhstan', 'KE' : 'Kenya', 'KI' : 'Kiribati', 'KR' : 'Korea', 'KW' : 'Kuwait', 'KG' : 'Kyrgyzstan', 'LA' : 'Lao People\\'s Democratic Republic', 'LV' : 'Latvia', 'LB' : 'Lebanon', 'LS' : 'Lesotho', 'LR' : 'Liberia', 'LY' : 'Libyan Arab Jamahiriya', 'LI' : 'Liechtenstein', 'LT' : 'Lithuania', 'LU' : 'Luxembourg', 'MO' : 'Macao', 'MK' : 'Macedonia', 'MG' : 'Madagascar', 'MW' : 'Malawi', 'MY' : 'Malaysia', 'MV' : 'Maldives', 'ML' : 'Mali', 'MT' : 'Malta', 'MH' : 'Marshall Islands', 'MQ' : 'Martinique', 'MR' : 'Mauritania', 'MU' : 'Mauritius', 'YT' : 'Mayotte', 'MX' : 'Mexico', 'FM' : 'Micronesia, Federated States Of', 'MD' : 'Moldova', 'MC' : 'Monaco', 'MN' : 'Mongolia', 'ME' : 'Montenegro', 'MS' : 'Montserrat', 'MA' : 'Morocco', 'MZ' : 'Mozambique', 'MM' : 'Myanmar', 'NA' : 'Namibia', 'NR' : 'Nauru', 'NP' : 'Nepal', 'NL' : 'Netherlands', 'AN' : 'Netherlands Antilles', 'NC' : 'New Caledonia', 'NZ' : 'New Zealand', 'NI' : 'Nicaragua', 'NE' : 'Niger', 'NG' : 'Nigeria', 'NU' : 'Niue', 'NF' : 'Norfolk Island', 'MP' : 'Northern Mariana Islands', 'NO' : 'Norway', 'OM' : 'Oman', 'PK' : 'Pakistan', 'PW' : 'Palau', 'PS' : 'Palestinian Territory, Occupied', 'PA' : 'Panama', 'PG' : 'Papua New Guinea', 'PY' : 'Paraguay', 'PE' : 'Peru', 'PH' : 'Philippines', 'PN' : 'Pitcairn', 'PL' : 'Poland', 'PT' : 'Portugal', 'PR' : 'Puerto Rico', 'QA' : 'Qatar', 'RE' : 'Reunion', 'RO' : 'Romania', 'RU' : 'Russian Federation', 'RW' : 'Rwanda', 'BL' : 'Saint Barthelemy', 'SH' : 'Saint Helena', 'KN' : 'Saint Kitts And Nevis', 'LC' : 'Saint Lucia', 'MF' : 'Saint Martin', 'PM' : 'Saint Pierre And Miquelon', 'VC' : 'Saint Vincent And Grenadines', 'WS' : 'Samoa', 'SM' : 'San Marino', 'ST' : 'Sao Tome And Principe', 'SA' : 'Saudi Arabia', 'SN' : 'Senegal', 'RS' : 'Serbia', 'SC' : 'Seychelles', 'SL' : 'Sierra Leone', 'SG' : 'Singapore', 'SK' : 'Slovakia', 'SI' : 'Slovenia', 'SB' : 'Solomon Islands', 'SO' : 'Somalia', 'ZA' : 'South Africa', 'GS' : 'South Georgia And Sandwich Isl.', 'ES' : 'Spain', 'LK' : 'Sri Lanka', 'SD' : 'Sudan', 'SR' : 'Suriname', 'SJ' : 'Svalbard And Jan Mayen', 'SZ' : 'Swaziland', 'SE' : 'Sweden', 'CH' : 'Switzerland', 'SY' : 'Syrian Arab Republic', 'TW' : 'Taiwan', 'TJ' : 'Tajikistan', 'TZ' : 'Tanzania', 'TH' : 'Thailand', 'TL' : 'Timor-Leste', 'TG' : 'Togo', 'TK' : 'Tokelau', 'TO' : 'Tonga', 'TT' : 'Trinidad And Tobago', 'TN' : 'Tunisia', 'TR' : 'Turkey', 'TM' : 'Turkmenistan', 'TC' : 'Turks And Caicos Islands', 'TV' : 'Tuvalu', 'UG' : 'Uganda', 'UA' : 'Ukraine', 'AE' : 'United Arab Emirates', 'GB' : 'United Kingdom', 'US' : 'United States', 'UM' : 'United States Outlying Islands', 'UY' : 'Uruguay', 'UZ' : 'Uzbekistan', 'VU' : 'Vanuatu', 'VE' : 'Venezuela', 'VN' : 'Viet Nam', 'VG' : 'Virgin Islands, British', 'VI' : 'Virgin Islands, U.S.', 'WF' : 'Wallis And Futuna', 'EH' : 'Western Sahara', 'YE' : 'Yemen', 'ZM' : 'Zambia', 'ZW' : 'Zimbabwe' };\n\n\n// let country_list = [\"Afghanistan\", \"Albania\", \"Algeria\", \"Andorra\", \"Angola\", \"Anguilla\", \"Antigua &amp; Barbuda\", \"Argentina\", \"Armenia\", \"Aruba\", \"Australia\", \"Austria\", \"Azerbaijan\", \"Bahamas\", \"Bahrain\", \"Bangladesh\", \"Barbados\", \"Belarus\", \"Belgium\", \"Belize\", \"Benin\", \"Bermuda\", \"Bhutan\", \"Bolivia\", \"Bosnia &amp; Herzegovina\", \"Botswana\", \"Brazil\", \"British Virgin Islands\", \"Brunei\", \"Bulgaria\", \"Burkina Faso\", \"Burundi\", \"Cambodia\", \"Cameroon\", \"Cape Verde\", \"Cayman Islands\", \"Chad\", \"Chile\", \"China\", \"Colombia\", \"Congo\", \"Cook Islands\", \"Costa Rica\", \"Cote D Ivoire\", \"Croatia\", \"Cruise Ship\", \"Cuba\", \"Cyprus\", \"Czech Republic\", \"Denmark\", \"Djibouti\", \"Dominica\", \"Dominican Republic\", \"Ecuador\", \"Egypt\", \"El Salvador\", \"Equatorial Guinea\", \"Estonia\", \"Ethiopia\", \"Falkland Islands\", \"Faroe Islands\", \"Fiji\", \"Finland\", \"France\", \"French Polynesia\", \"French West Indies\", \"Gabon\", \"Gambia\", \"Georgia\", \"Germany\", \"Ghana\", \"Gibraltar\", \"Greece\", \"Greenland\", \"Grenada\", \"Guam\", \"Guatemala\", \"Guernsey\", \"Guinea\", \"Guinea Bissau\", \"Guyana\", \"Haiti\", \"Honduras\", \"Hong Kong\", \"Hungary\", \"Iceland\", \"India\", \"Indonesia\", \"Iran\", \"Iraq\", \"Ireland\", \"Isle of Man\", \"Israel\", \"Italy\", \"Jamaica\", \"Japan\", \"Jersey\", \"Jordan\", \"Kazakhstan\", \"Kenya\", \"Kuwait\", \"Kyrgyz Republic\", \"Laos\", \"Latvia\", \"Lebanon\", \"Lesotho\", \"Liberia\", \"Libya\", \"Liechtenstein\", \"Lithuania\", \"Luxembourg\", \"Macau\", \"Macedonia\", \"Madagascar\", \"Malawi\", \"Malaysia\", \"Maldives\", \"Mali\", \"Malta\", \"Mauritania\", \"Mauritius\", \"Mexico\", \"Moldova\", \"Monaco\", \"Mongolia\", \"Montenegro\", \"Montserrat\", \"Morocco\", \"Mozambique\", \"Namibia\", \"Nepal\", \"Netherlands\", \"Netherlands Antilles\", \"New Caledonia\", \"New Zealand\", \"Nicaragua\", \"Niger\", \"Nigeria\", \"Norway\", \"Oman\", \"Pakistan\", \"Palestine\", \"Panama\", \"Papua New Guinea\", \"Paraguay\", \"Peru\", \"Philippines\", \"Poland\", \"Portugal\", \"Puerto Rico\", \"Qatar\", \"Reunion\", \"Romania\", \"Russia\", \"Rwanda\", \"Saint Pierre &amp; Miquelon\", \"Samoa\", \"San Marino\", \"Satellite\", \"Saudi Arabia\", \"Senegal\", \"Serbia\", \"Seychelles\", \"Sierra Leone\", \"Singapore\", \"Slovakia\", \"Slovenia\", \"South Africa\", \"South Korea\", \"Spain\", \"Sri Lanka\", \"St Kitts &amp; Nevis\", \"St Lucia\", \"St Vincent\", \"St. Lucia\", \"Sudan\", \"Suriname\", \"Swaziland\", \"Sweden\", \"Switzerland\", \"Syria\", \"Taiwan\", \"Tajikistan\", \"Tanzania\", \"Thailand\", \"Timor L'Este\", \"Togo\", \"Tonga\", \"Trinidad &amp; Tobago\", \"Tunisia\", \"Turkey\", \"Turkmenistan\", \"Turks &amp; Caicos\", \"Uganda\", \"Ukraine\", \"United Arab Emirates\", \"United Kingdom\", \"Uruguay\", \"Uzbekistan\", \"Venezuela\", \"Vietnam\", \"Virgin Islands (US)\", \"Yemen\", \"Zambia\", \"Zimbabwe\"];\n\n"]},"metadata":{},"sourceType":"module"}