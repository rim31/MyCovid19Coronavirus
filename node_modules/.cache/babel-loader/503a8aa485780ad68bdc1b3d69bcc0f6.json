{"ast":null,"code":"import _slicedToArray from\"/Users/rims/Documents/Projects/covid19/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{useHistory}from'react-router-dom';import{StoreContainer}from'../Store';import LinearChart from'../Charts/LinearChart';// import BarChart from '../Charts/BarChart';\n// import { map } from 'lodash';\n// import { imgUrl } from '../../../public/loading.png';\nimport SelectCase from'../Charts/SelectCase';import SelectPeriod from'../Charts/SelectPeriod';import moment from'moment';// const imgStyle = {\n//   height: '2rem',\n//   paddingLeft: '2px',\n//   backgroundImage: 'url(`../../../public/loading.png`)',\n// };\n// ISO 3166-1 alpha-2\n// ⚠️ No support for IE 11\nfunction countryToFlag(isoCode){return typeof String.fromCodePoint!=='undefined'?isoCode.toUpperCase().replace(/./g,function(char){return String.fromCodePoint(char.charCodeAt(0)+127397);}):isoCode;}export default function GraphComponent(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),country=_useState2[0],setCountry=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),code=_useState4[0],setCode=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),countries=_useState6[0],setCountries=_useState6[1];var _React$useState=React.useState(\"\".concat(moment().subtract(1,'week').format())),_React$useState2=_slicedToArray(_React$useState,2),dates=_React$useState2[0],setDates=_React$useState2[1];var _React$useState3=React.useState(\"confirmed\"),_React$useState4=_slicedToArray(_React$useState3,2),cases=_React$useState4[0],setCases=_React$useState4[1];var history=useHistory();// let url = useParams;\nvar unstated=StoreContainer.useContainer();// const country_list = unstated.country_list.map((item, i) =>\n//   <span style={{ fontSize: '6px', paddingLeft: '3px' }} key={i} onClick={(i) => alert(i)}>{item.name}</span>)\nfunction handleClick(event){// setCountry(value);\nsetCountry(event.currentTarget.dataset.name.toLowerCase());unstated.setCountry(event.currentTarget.dataset.name.toLowerCase());setCode(event.currentTarget.dataset.code.toLowerCase());unstated.setCode(event.currentTarget.dataset.code.toLowerCase());console.log(event.currentTarget.dataset.code.toLowerCase());}var handleSubmit=function handleSubmit(evt){evt.preventDefault();if(country){history.push(\"/graph/\".concat(code));}};React.useEffect(function(){console.log(\"Graph\");setCountries(unstated.country_list);if(unstated.code){unstated.getCovidCountry(unstated.code,cases,dates);}else if(unstated.country!==''&&countries.filter(function(countries){return countries.name.toLowerCase().includes(unstated.country);}).length===1){unstated.getCovidCountry(unstated.country,cases,dates);}else{unstated.getCovidCountry(\"\",\"\",\"\".concat(moment().subtract(3,'days').format()));}// eslint-disable-next-line\n},[country,unstated.country,cases,dates]);return/*#__PURE__*/React.createElement(\"div\",{style:{backgroundColor:\"#343a40\"}},/*#__PURE__*/React.createElement(\"h2\",{style:{textAlign:\"center\",color:\"white\"}},\" Covid19 - Search a Country \"),/*#__PURE__*/React.createElement(\"div\",{className:\"field\"},/*#__PURE__*/React.createElement(\"div\",{className:\"control has-icons-left\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit,style:{display:'flex'}},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"input  is-fullwidth\",value:country,onChange:function onChange(e){return setCountry(e.target.value.toLowerCase());}}),country?/*#__PURE__*/React.createElement(\"span\",{className:\"icon is-small is-left\",onClick:function onClick(){setCountry(\"\");setCode(\"\");}},/*#__PURE__*/React.createElement(\"i\",{className:\"delete\"})):/*#__PURE__*/React.createElement(React.Fragment,null),/*#__PURE__*/React.createElement(SelectCase,{setCases:setCases}),/*#__PURE__*/React.createElement(SelectPeriod,{setDates:setDates}),/*#__PURE__*/React.createElement(\"input\",{type:\"submit\",value:\"Submit\",className:\"button is-primary \",style:{marginLeft:\"3px\"}})))),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h1\",null,\" \",country,\" \"),/*#__PURE__*/React.createElement(\"div\",{className:\"columns\"},/*#__PURE__*/React.createElement(\"div\",{className:\"column is-one-fifth\",style:{display:\"flex\",flexDirection:\"column\",flexWrap:\"wrap\",overflow:\"hidden\",whiteSpace:\"nowrap\",/* Don't forget this one */textOverflow:\"ellipsis\"}},unstated.country_list.filter(function(countries){return countries.name.toLowerCase().includes(country);}).map(function(item,i){return/*#__PURE__*/React.createElement(\"span\",{\"data-name\":item.name,\"data-code\":item.code,className:\"button is-secondary is-fullwidth\",key:i,onClick:handleClick,style:{margin:\"1px\",justifyContent:\"space-between\"}},item.name,/*#__PURE__*/React.createElement(\"span\",null,countryToFlag(item.code)));})),/*#__PURE__*/React.createElement(\"div\",{className:\"column\"},/*#__PURE__*/React.createElement(\"div\",{id:\"carouselExampleIndicators\",className:\"carousel slide\",\"data-ride\":\"carousel\"}),unstated.data?/*#__PURE__*/React.createElement(LinearChart,{dataCountry:unstated.data,labelsCountry:unstated.labels,country:country}):/*#__PURE__*/React.createElement(React.Fragment,null)))));}","map":{"version":3,"sources":["/Users/rims/Documents/Projects/covid19/src/components/Pages/GraphComponent.tsx"],"names":["React","useState","useHistory","StoreContainer","LinearChart","SelectCase","SelectPeriod","moment","countryToFlag","isoCode","String","fromCodePoint","toUpperCase","replace","char","charCodeAt","GraphComponent","country","setCountry","code","setCode","countries","setCountries","subtract","format","dates","setDates","cases","setCases","history","unstated","useContainer","handleClick","event","currentTarget","dataset","name","toLowerCase","console","log","handleSubmit","evt","preventDefault","push","useEffect","country_list","getCovidCountry","filter","includes","length","backgroundColor","textAlign","color","display","e","target","value","marginLeft","flexDirection","flexWrap","overflow","whiteSpace","textOverflow","map","item","i","margin","justifyContent","data","labels"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\nimport { useHistory } from 'react-router-dom';\nimport { StoreContainer } from '../Store';\nimport LinearChart from '../Charts/LinearChart';\n// import BarChart from '../Charts/BarChart';\n// import { map } from 'lodash';\n// import { imgUrl } from '../../../public/loading.png';\nimport SelectCase from '../Charts/SelectCase';\nimport SelectPeriod from '../Charts/SelectPeriod';\nimport moment from 'moment';\n\n// const imgStyle = {\n//   height: '2rem',\n//   paddingLeft: '2px',\n//   backgroundImage: 'url(`../../../public/loading.png`)',\n// };\n\n// ISO 3166-1 alpha-2\n// ⚠️ No support for IE 11\nfunction countryToFlag(isoCode: any) {\n  return typeof String.fromCodePoint !== 'undefined'\n    ? isoCode\n      .toUpperCase()\n      .replace(/./g, (char: any) => String.fromCodePoint(char.charCodeAt(0) + 127397))\n    : isoCode;\n}\n\n\nexport default function GraphComponent() {\n  const [country, setCountry] = useState<string>(\"\");\n  const [code, setCode] = useState<string>(\"\");\n  const [countries, setCountries] = useState<any>([]);\n  const [dates, setDates] = React.useState<string>(`${moment().subtract(1, 'week').format()}`)\n  const [cases, setCases] = React.useState<string>(\"confirmed\")\n\n  let history = useHistory();\n  // let url = useParams;\n  const unstated = StoreContainer.useContainer();\n\n  // const country_list = unstated.country_list.map((item, i) =>\n  //   <span style={{ fontSize: '6px', paddingLeft: '3px' }} key={i} onClick={(i) => alert(i)}>{item.name}</span>)\n\n  function handleClick(event: any) {\n    // setCountry(value);\n    setCountry(event.currentTarget.dataset.name.toLowerCase());\n    unstated.setCountry(event.currentTarget.dataset.name.toLowerCase());\n    setCode(event.currentTarget.dataset.code.toLowerCase());\n    unstated.setCode(event.currentTarget.dataset.code.toLowerCase());\n    console.log(event.currentTarget.dataset.code.toLowerCase());\n\n  }\n\n  const handleSubmit = (evt: any) => {\n    evt.preventDefault();\n    if (country) {\n      history.push(`/graph/${code}`)\n    }\n  }\n\n  React.useEffect(() => {\n    console.log(\"Graph\")\n    setCountries(unstated.country_list);\n    if (unstated.code) {\n      unstated.getCovidCountry(unstated.code, cases, dates);\n    } else if (unstated.country !== '' && countries.filter((countries: any) => countries.name.toLowerCase().includes(unstated.country)).length === 1) {\n      unstated.getCovidCountry(unstated.country, cases, dates);\n    } else {\n      unstated.getCovidCountry(\"\", \"\", `${moment().subtract(3, 'days').format()}`);\n    }\n    // eslint-disable-next-line\n  }, [country, unstated.country, cases, dates])\n\n  return (\n    <div style={{ backgroundColor: \"#343a40\" }}>\n      < h2 style={{ textAlign: \"center\", color: \"white\" }}> Covid19 - Search a Country </h2 >\n      <div className=\"field\">\n        <div className=\"control has-icons-left\">\n          <form onSubmit={handleSubmit} style={{ display: 'flex' }}>\n            <input type=\"text\" className=\"input  is-fullwidth\" value={country} onChange={e => setCountry((e.target.value).toLowerCase())} />\n            {country ? <span className=\"icon is-small is-left\" onClick={() => { setCountry(\"\"); setCode(\"\"); }}>\n              <i className=\"delete\"></i>\n            </span> : <></>}\n            <SelectCase setCases={setCases} />\n            <SelectPeriod setDates={setDates} />\n            <input type=\"submit\" value=\"Submit\" className=\"button is-primary \" style={{ marginLeft: \"3px\" }} />\n          </form>\n        </div>\n      </div>\n      <div>\n        <h1> {country} </h1>\n        <div className=\"columns\">\n          <div\n            className=\"column is-one-fifth\"\n            style={{\n              display: \"flex\", flexDirection: \"column\", flexWrap: \"wrap\", overflow: \"hidden\",\n              whiteSpace: \"nowrap\", /* Don't forget this one */\n              textOverflow: \"ellipsis\",\n            }}>\n            {unstated.country_list.filter((countries: any) => countries.name.toLowerCase().includes(country)).map((item: any, i: any) => <span data-name={item.name} data-code={item.code}\n              className=\"button is-secondary is-fullwidth\" key={i} onClick={handleClick}\n              style={{ margin: \"1px\", justifyContent: \"space-between\", }} >\n              {item.name}\n\n              <span>{countryToFlag(item.code)}</span>\n\n            </span>)}\n          </div>\n          <div className=\"column\">\n\n            <div id=\"carouselExampleIndicators\" className=\"carousel slide\" data-ride=\"carousel\">\n              {/*<ol className=\"carousel-indicators\">\n                <li data-target=\"#carouselExampleIndicators\" data-slide-to=\"0\" className=\"active\"></li>\n                <li data-target=\"#carouselExampleIndicators\" data-slide-to=\"1\"></li>\n                <li data-target=\"#carouselExampleIndicators\" data-slide-to=\"2\"></li>\n              </ol>\n              <div className=\"carousel-inner\">\n                <div className=\"carousel-item active\">\n                  {unstated.data ?\n                    <LinearChart dataCountry={unstated.data} labelsCountry={unstated.labels} country={country} />\n                    : <></>}\n                </div>\n                <div className=\"carousel-item\">\n                  {unstated.data ?\n                    <BarChart dataCountry={unstated.data} labelsCountry={unstated.labels} country={country} />\n                    : <></>}    </div>\n                <div className=\"carousel-item\">\n                  {unstated.data ?\n                    <LinearChart dataCountry={unstated.data} labelsCountry={unstated.labels} country={country} />\n                    : <></>}\n                </div>\n              </div>\n              <a className=\"carousel-control-prev\" href=\"#carouselExampleIndicators\" role=\"button\" data-slide=\"prev\">\n                <span className=\"carousel-control-prev-icon\" aria-hidden=\"true\"></span>\n                <span className=\"sr-only\">Previous</span>\n              </a>\n              <a className=\"carousel-control-next\" href=\"#carouselExampleIndicators\" role=\"button\" data-slide=\"next\">\n                <span className=\"carousel-control-next-icon\" aria-hidden=\"true\"></span>\n                <span className=\"sr-only\">Next</span>\n              </a>*/}\n            </div>\n\n            {unstated.data ?\n              <LinearChart dataCountry={unstated.data} labelsCountry={unstated.labels} country={country} />\n              : <></>}\n          </div>\n        </div>\n      </div>\n    </div >\n  )\n}\n"]},"metadata":{},"sourceType":"module"}